(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1003:function(t,e,n){"use strict";e.a=[{inputs:[{internalType:"bytes32",name:"_gravityId",type:"bytes32"},{internalType:"uint256",name:"_powerThreshold",type:"uint256"},{internalType:"address[]",name:"_validators",type:"address[]"},{internalType:"uint256[]",name:"_powers",type:"uint256[]"},{internalType:"address[]",name:"_validators2",type:"address[]"},{internalType:"uint256[]",name:"_powers2",type:"uint256[]"},{internalType:"address",name:"_wethAddress",type:"address"},{internalType:"address",name:"_guardian",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes32",name:"_invalidationId",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_invalidationNonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"},{indexed:!1,internalType:"bytes",name:"_returnData",type:"bytes"}],name:"LogicCallEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_batchNonce",type:"uint256"},{indexed:!0,internalType:"address",name:"_token",type:"address"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"TransactionBatchExecutedEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destinationChain",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_fee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"TransferToChainEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"},{indexed:!1,internalType:"address[]",name:"_validators",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"_powers",type:"uint256[]"}],name:"ValsetUpdatedEvent",type:"event"},{inputs:[{internalType:"address",name:"_guardian",type:"address"}],name:"changeGuardian",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"guardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_erc20Address",type:"address"}],name:"lastBatchNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_invalidation_id",type:"bytes32"}],name:"lastLogicCallNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_tokenContracts",type:"address[]"},{internalType:"address",name:"_safeAddress",type:"address"}],name:"panicHalt",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"state_gravityId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"state_invalidationMapping",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"state_lastBatchNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastEventNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetCheckpoint",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_powerThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"},{internalType:"address payable[]",name:"_destinations",type:"address[]"},{internalType:"uint256[]",name:"_fees",type:"uint256[]"},{internalType:"uint256",name:"_batchNonce",type:"uint256"},{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"uint256",name:"_batchTimeout",type:"uint256"}],name:"submitBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"},{components:[{internalType:"uint256[]",name:"transferAmounts",type:"uint256[]"},{internalType:"address[]",name:"transferTokenContracts",type:"address[]"},{internalType:"uint256[]",name:"feeAmounts",type:"uint256[]"},{internalType:"address[]",name:"feeTokenContracts",type:"address[]"},{internalType:"address",name:"logicContractAddress",type:"address"},{internalType:"bytes",name:"payload",type:"bytes"},{internalType:"uint256",name:"timeOut",type:"uint256"},{internalType:"bytes32",name:"invalidationId",type:"bytes32"},{internalType:"uint256",name:"invalidationNonce",type:"uint256"}],internalType:"struct LogicCallArgs",name:"_args",type:"tuple"}],name:"submitLogicCall",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_destinationChain",type:"bytes32"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_fee",type:"uint256"}],name:"transferETHToChain",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destinationChain",type:"bytes32"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_fee",type:"uint256"}],name:"transferToChain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_newValidators",type:"address[]"},{internalType:"uint256[]",name:"_newPowers",type:"uint256[]"},{internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"}],name:"updateValset",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"wethAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}]},1004:function(t,e,n){"use strict";e.a=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"},{name:"wad",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"src",type:"address"},{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"wad",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"guy",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"dst",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"dst",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}]},1124:function(t,e,n){"use strict";var r=n(61),o=n(603),l={LOADING_STAGE:n(1).t,components:{Loader:o.a},props:{step:{type:Object,required:!0},loadingStage:{type:String,required:!0}},data:()=>({}),computed:{timestamp(){var t;return null===(t=this.step.tx)||void 0===t?void 0:t.timestamp},time(){return this.timestamp?Object(r.n)(this.timestamp):""},hash(){var t;return(null===(t=this.step.tx)||void 0===t?void 0:t.hash)||""}},methods:{pretty:r.s,getEthereumTxUrl:r.e,getExplorerTxUrl:r.l,formatHash:t=>Object(r.y)(t,8)}},c=n(40),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"hub__preview-transaction-row"},[n("div",[n("Loader",{staticClass:"hub__buy-loader",attrs:{"is-loading":!t.step.finished}}),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WRAP_ETH?[t._v("\n                Wrap "+t._s(t.pretty(t.step.amount))+" ETH\n            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SWAP_ETH?[t._v("\n                Swap "+t._s(t.pretty(t.step.amount0))+" "+t._s(t.step.coin0)+" for "+t._s(t.step.coin1)+"\n            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.APPROVE_BRIDGE?[t._v("\n                Approve "+t._s(t.step.coin)+"\n            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SEND_BRIDGE?[t._v("\n                Send "+t._s(t.pretty(t.step.amount))+" "+t._s(t.step.coin)+" to bridge\n            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WAIT_BRIDGE?[t.step.finished?[t._v("Received "+t._s(t.pretty(t.step.amount))+" "+t._s(t.step.coin)+" from bridge")]:[t._v("Waiting "+t._s(t.step.coin)+" from bridge")]]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.SWAP_MINTER?[t._v("\n                Swap "+t._s(t.pretty(t.step.amount0))+" "+t._s(t.step.coin0)+" for "+t._s(t.step.coin1)+"\n            ")]:t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.FINISH?[t._v("\n                Received "+t._s(t.pretty(t.step.amount))+" "+t._s(t.step.coin)+"\n            ")]:t._e()],2)]),t._v(" "),n("div",{staticClass:"hub__buy-transaction-row hub__preview-transaction-meta"},[n("div",[0===t.hash.indexOf("0x")?n("a",{staticClass:"link--main link--hover",attrs:{href:t.getEthereumTxUrl(t.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.hash)))]):t._e(),t._v(" "),0===t.hash.indexOf("Mt")?n("a",{staticClass:"link--main link--hover",attrs:{href:t.getExplorerTxUrl(t.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.hash)))]):t._e()]),t._v(" "),n("div",{staticClass:"hub__buy-time"},[t.time?[t._v(t._s(t.time))]:t._e()],2)])])}),[],!1,null,null,null);e.a=component.exports},1125:function(t,e,n){"use strict";var r,o=n(27),l=(n(283),n(8),n(298)),c=n(62),d=n(687),m=n(284),f=n(61);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={LOADING_STAGE:n(1).t,mixins:[Object(l.a)(1e3)],props:{stepsOrdered:{type:Array,required:!0}},data:()=>({priceList:[]}),computed:{ethGasPriceGwei(){return Object(m.b)(this.priceList)},slowStep(){var t=this.stepsOrdered.slice().reverse().find((t=>{var e=t.step.tx;if(!e||!e.timestamp||!e.params)return!1;var n=0===e.hash.indexOf("0x"),r=e.blockHash,o=new Date(this.$now)-new Date(e.timestamp)>6e3,l=Number(e.params.gasPrice)<Number(this.ethGasPriceGwei);return n&&!r&&o&&l}));if(t)return t.tx.chainId=Number(t.tx.chainId),v(v({},t.step),{},{loadingStage:t.loadingStage})}},mounted(){r=setInterval((()=>{Object(m.e)().then((t=>{this.priceList=Object.freeze(t)}))}),15e3)},destroyed(){clearInterval(r)},methods:{pretty:f.s,getEvmTxUrl:f.g,formatHash:t=>Object(f.y)(t,8),getFee(t,e){var n=d.l.fromWei(d.l.toWei(t.toString(),"gwei"),"ether");return new c.c(n).times(e).toString()},speedup(){this.$emit("speedup",{txParams:v(v({},this.slowStep.tx.params),{},{gasPrice:this.ethGasPriceGwei}),loadingStage:this.slowStep.loadingStage})}}},_=n(40),component=Object(_.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.slowStep?n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell"},[n("h2",{staticClass:"panel__header-title"},[t._v("Do you want to speed up pending tx?")]),t._v(" "),n("div",{staticClass:"u-mt-05"},[t._v("\n                Tx to speed up: "),n("br"),t._v(" "),t.slowStep.loadingStage===t.$options.LOADING_STAGE.WRAP_ETH?[t._v("\n                    Wrap ETH\n                ")]:t._e(),t._v(" "),t.slowStep.loadingStage===t.$options.LOADING_STAGE.SWAP_ETH?[t._v("\n                    Swap "+t._s(t.slowStep.coin0)+" for "+t._s(t.slowStep.coin1)+"\n                ")]:t._e(),t._v(" "),t.slowStep.loadingStage===t.$options.LOADING_STAGE.APPROVE_BRIDGE?[t._v("\n                    Approve "+t._s(t.slowStep.coin)+"\n                ")]:t._e(),t._v(" "),t.slowStep.loadingStage===t.$options.LOADING_STAGE.SEND_BRIDGE?[t._v("\n                    Send "+t._s(t.slowStep.coin)+"\n                ")]:t._e(),t._v(" "),n("a",{staticClass:"link--main link--hover",attrs:{href:t.getEvmTxUrl(t.slowStep.tx.chainId,t.slowStep.tx.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.slowStep.tx.hash)))])],2),t._v(" "),n("div",{staticClass:"u-mt-05"},[t._v("\n                Gas price change: "),n("br"),t._v(" "+t._s(t.slowStep.tx.params.gasPrice)+" → "),n("strong",[t._v(t._s(t.ethGasPriceGwei))])]),t._v(" "),n("div",{staticClass:"u-mt-05"},[t._v("\n                Fee change: "),n("br"),t._v(" "+t._s(t.getFee(t.slowStep.tx.params.gasPrice,t.slowStep.tx.params.gasLimit))+" ETH → "),n("strong",[t._v(t._s(t.getFee(t.ethGasPriceGwei,t.slowStep.tx.params.gasLimit))+" ETH")])]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"u-cell"},[n("button",{staticClass:"button button--main button--full",class:{"is-disabled":!t.$store.state.onLine},attrs:{type:"button"},on:{click:function(e){return t.speedup()}}},[t._v("\n                Speed up\n            ")])])])]):t._e()}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"u-mt-05 u-fw-500"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" Make sure you have enough ETH on your address to pay new fee.\n            ")])}],!1,null,null,null);e.a=component.exports},1142:function(t,e,n){"use strict";n.r(e);var r=n(626),o=n(810).a,l=n(40),c={components:{HubBuyForm:Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-wrap"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                "+t._s(t.$td("Buy","buy.title"))+"\n            ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n                "+t._s(t.$td("Buy BIP or HUB for ETH","buy.description"))+"\n            ")])]),t._v(" "),t.recovery?n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell"},[t._v("You have unfinished purchase, do you want to continue?")]),t._v(" "),n("div",{staticClass:"u-cell u-cell--medium--1-4"},[n("button",{staticClass:"button button--main button--full",attrs:{type:"button"},on:{click:function(e){return t.recoverPurchase()}}},[t._v("Continue")])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--medium--1-4"},[n("button",{staticClass:"button button--ghost button--full",attrs:{type:"button"},on:{click:function(e){return t.cancelRecovery()}}},[t._v("Cancel")])])])]):t._e(),t._v(" "),n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submitConfirm()}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Spend")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{readonly:t.isFormSending,$value:t.$v.form.amountEth,label:"Amount to spend","max-value":t.maxAmount},model:{value:t.form.amountEth,callback:function(e){t.$set(t.form,"amountEth",e)},expression:"form.amountEth"}}),t._v(" "),t.$v.form.amountEth.$dirty&&!t.$v.form.amountEth.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):!t.$v.form.amountEth.$dirty||t.$v.form.amountEth.validAmount&&t.$v.form.amountEth.minValue?t.$v.form.amountEth.$dirty&&!t.$v.form.amountEth.enoughToPayFee?n("span",{staticClass:"form-field__error"},[t._v("Not enough to pay fee")]):t._e():n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{readonly:t.isFormSending,$value:t.$v.form.coinToGet,label:t.$td("Get","form.buy-get"),"coin-list":t.suggestionList,"select-mode":!0},on:{blur:function(e){return t.inputBlur()}},model:{value:t.form.coinToGet,callback:function(e){t.$set(t.form,"coinToGet",e)},expression:"form.coinToGet"}}),t._v(" "),t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coinToGet.$dirty&&!t.$v.form.coinToGet.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported to buy","form.buy-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--small--1-2 u-cell--xlarge--1-4"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.currentEstimation)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("Estimated amount to get")]),t._v(" "),n("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isEstimationWaiting}}),t._v(" "),t.isEstimationErrorVisible?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.estimationError))]):n("div",{staticClass:"form-field__help"},[t._v("\n                            "+t._s(t.$td("Depends on the network state and is subject to change","form.buy-amount-get-help"))+"\n                        ")])],1)]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-loading":t.isFormSending,"is-disabled":t.$v.$invalid||!t.$store.state.onLine}},[n("span",{staticClass:"button__content"},[t._v("Buy")]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1)]),t._v(" "),t.serverError||!t.$store.state.onLine?n("div",{staticClass:"u-cell form__error send__text"},[t.$store.state.onLine?[t._v(t._s(t.serverError))]:[t._v("No internet connection")]],2):t._e()])]),t._v(" "),n("div",{staticClass:"panel__section panel__section--tint"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.ethTotalFee))+" ETH")]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("Ethereum fee")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.coinAmountAfterBridge))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Bridge output")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("≈"+t._s(t.pretty(t.hubFee))+" "+t._s(t.$options.DEPOSIT_SYMBOL))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("\n                            "+t._s(t.$td("Bridge fee","form.hub-withdraw-hub-fee"))+"\n                            ("+t._s(t.prettyRound(100*t.hubFeeRate))+"%)\n                        ")])])])])])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isConfirmModalVisible},on:{"update:isOpen":function(e){t.isConfirmModalVisible=e},"update:is-open":function(e){t.isConfirmModalVisible=e}}},[n("div",{staticClass:"panel u-text-left"},[n("div",{staticClass:"panel__header"},[t._t("confirm-modal-header",(function(){return[n("h1",{staticClass:"panel__header-title"},[t._v("\n                        Buy "+t._s(t.form.coinToGet)+"\n                    ")])]}))],2),t._v(" "),n("div",{staticClass:"panel__section"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{coin:t.$options.DEPOSIT_SYMBOL,amount:t.form.amountEth}}),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("You will spend")])],1)]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{coin:t.form.coinToGet,amount:t.currentEstimation,prefix:"≈"}}),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("You will get")]),t._v(" "),n("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isEstimationWaiting}})],1)]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("BaseAmount",{staticClass:"form-field__input is-not-empty",attrs:{coin:"ETH",amount:t.ethTotalFee}}),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v("Ethereum fee")])],1),t._v(" "),t.ethFeeImpact>10?n("div",{staticClass:"u-mt-10 u-fw-700"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" High Ethereum fee, it consumes "+t._s(t.prettyRound(t.ethFeeImpact))+"% of your ETH")]):t._e()])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--main button--full",attrs:{type:"button","data-focus-on-open":""},on:{click:function(e){return t.submit()}}},[t._v("\n                    "+t._s(t.$td("Confirm","form.submit-confirm-button"))+"\n                ")]),t._v(" "),n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){t.isConfirmModalVisible=!1}}},[t._v("\n                    "+t._s(t.$td("Cancel","form.submit-cancel-button"))+"\n                ")])])])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isFormSending,"hide-close-button":!0},on:{"update:isOpen":function(e){t.isFormSending=e},"update:is-open":function(e){t.isFormSending=e}}},[n("div",{staticClass:"panel u-text-left"},[n("div",{staticClass:"panel__header"},[t._t("confirm-modal-header",(function(){return[n("h1",{staticClass:"panel__header-title"},[t.loadingStage===t.$options.LOADING_STAGE.WAIT_ETH?[n("Loader",{staticClass:"panel__header-loader",attrs:{"is-loading":!0}}),t._v("\n                            Waiting ETH deposit\n                        ")]:t.loadingStage===t.$options.LOADING_STAGE.FINISH?[t._v("\n                            "+t._s(t.$td("Success!","form.success-title"))+"\n                        ")]:[t._v("Buy "+t._s(t.form.coinToGet))]],2)]}))],2),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.WAIT_ETH?[n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin"},[n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed form-field--with-icon"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyExact(t.ethToTopUp))+" ETH")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Send")]),t._v(" "),n("ButtonCopyIcon",{staticClass:"form-field__icon form-field__icon--copy",attrs:{"copy-text":t.ethToTopUp.toString()}})],1)]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed form-field--with-icon"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.ethAddress))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("To the address")]),t._v(" "),n("ButtonCopyIcon",{staticClass:"form-field__icon form-field__icon--copy",attrs:{"copy-text":t.ethAddress}})],1)]),t._v(" "),t.ethFeeImpact>10?n("div",{staticClass:"u-cell u-fw-700"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" High Ethereum fee, it consumes "+t._s(t.prettyRound(t.ethFeeImpact))+"% of your ETH\n                        ")]):t._e(),t._v(" "),n("div",{staticClass:"u-cell"},[n("QrcodeVue",{staticClass:"u-mb-10 u-text-center",attrs:{value:t.deepLink,size:160,level:"L"}}),t._v(" "),n("a",{staticClass:"link--default u-text-break-all",attrs:{href:t.deepLink,target:"_blank"}},[t._v(t._s(t.deepLink))])],1)])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){return t.finishSending()}}},[t._v("\n                        Cancel\n                    ")])])]:n("div",{staticClass:"panel__section"},t._l(t.stepsOrdered,(function(t){return n("HubBuyTxListItem",{key:t.loadingStage,staticClass:"hub__buy-stage",attrs:{step:t.step,loadingStage:t.loadingStage}})})),1),t._v(" "),n("HubBuySpeedup",{attrs:{"steps-ordered":t.stepsOrdered},on:{speedup:t.speedup}}),t._v(" "),t.serverError||!t.$store.state.onLine?n("div",{staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-text-error u-fw-500"},[t.$store.state.onLine?[t._v(t._s(t.serverError))]:[t._v("No internet connection")]],2),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-disabled":!t.$store.state.onLine},attrs:{type:"button"},on:{click:function(e){return t.retrySending()}}},[t._v("\n                            Retry\n                        ")])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2"},[n("button",{staticClass:"button button--ghost button--full",attrs:{type:"button"},on:{click:function(e){return t.finishSending()}}},[t._v("\n                            Finish\n                        ")])])])]):t._e(),t._v(" "),t.loadingStage!==t.$options.LOADING_STAGE.WAIT_ETH&&t.loadingStage!==t.$options.LOADING_STAGE.FINISH?n("div",{staticClass:"panel__section panel__section--tint u-fw-500"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" Please keep this page active, otherwise progress may be lost.\n            ")]):t._e(),t._v(" "),t.loadingStage===t.$options.LOADING_STAGE.FINISH?n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){return t.finishSending()}}},[t._v("\n                    "+t._s(t.$td("Close","form.success-close-button"))+"\n                ")])]):t._e()],2)])],1)}),[],!1,null,null,null).exports},middleware(t){var{app:e,store:n,redirect:r}=t;return r(e.i18nGetPreferredPath("hub"))},head(){var title=Object(r.a)(this.$store.state.sectionName,this.$i18n.locale),t=this.$td("","buy.seo-description"),e="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:t},{hid:"og-description",name:"og:description",content:t},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-wallet").concat(e,".png")}]}},computed:{},methods:{}},d=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"u-section u-container"},[e("HubBuyForm")],1)}),[],!1,null,null,null);e.default=d.exports},601:function(t,e,n){"use strict";function r(t){return"SELECT"===t.nodeName.toUpperCase()}function o(t){l(t.target)}function l(t){setTimeout((()=>{t.value.length?t.classList.add("is-not-empty"):t.classList.remove("is-not-empty")}),0)}e.a={bind(t,e,n){l(t),r(t)?t.addEventListener("change",o):t.addEventListener("input",o),e.value&&t.addEventListener(e.value,o)},componentUpdated(t,e){l(t),e.oldValue!==e.value&&t.removeEventListener(e.oldValue,o),e.value&&t.addEventListener(e.value,o)},unbind(t,e){r(t)?t.removeEventListener("change",o):t.removeEventListener("input",o),e.value&&t.removeEventListener(e.value,o)}}},603:function(t,e,n){"use strict";var r={props:{isLoading:{type:Boolean,default:!1}}},o=(n(642),n(40)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("circle",{staticClass:"loader__path",attrs:{cx:"14",cy:"14",r:"12"}})]):t._e()}),[],!1,null,null,null);e.a=component.exports},611:function(t,e,n){"use strict";n.d(e,"h",(function(){return D})),n.d(e,"g",(function(){return k})),n.d(e,"f",(function(){return B})),n.d(e,"a",(function(){return N})),n.d(e,"c",(function(){return F})),n.d(e,"b",(function(){return H})),n.d(e,"d",(function(){return W})),n.d(e,"i",(function(){return U})),n.d(e,"j",(function(){return K})),n.d(e,"e",(function(){return z}));var r=n(27),o=(n(21),n(6),n(11),n(48)),l=n.n(o),c=n(595),d=n(168),m=n.n(d),f=n(678),h=n(679),v=n(666),y=n(667),_=n(680),T=n(682),C=n(683),w=n(636),E=n(147),S=n(664),O=(n(668),n(669)),x=n(1),A=n(409),P=n(47);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.a.defaults.adapter;return t=Object(c.a)(t,{enabledByDefault:!1}),t=Object(A.a)(t,{time:500,leading:!1})}(),I=new f.a({apiType:"gate",baseURL:x.r,chainId:x.i,adapter:L}),D=Object(h.b)(I),k=Object(v.a)(I),B=Object(y.a)(I),N=Object(h.a)(I),G=new m.a({ttl:5e3,max:100}),M=(t,e)=>t.sellAll?Object(T.a)(I,{cache:G})(t,e):Object(_.a)(I,{cache:G})(t,e),R=new C.a(I,{cache:G});function F(t,e){return t.valueToSell&&Number(t.valueToSell)?t.findRoute&&t.swapFrom!==E.c.BANCOR?Object(P.m)(t.coinToSell,t.coinToBuy,{sellAmount:t.valueToSell,swapFrom:t.swapFrom},j(j({},e),{},{cache:G})).then((n=>{var r;return Promise.all([M(j(j({},t),{},{route:null===(r=n.coins)||void 0===r?void 0:r.map((t=>t.id)).slice(1,-1),swapFrom:n.swapType}),e),Promise.resolve(n.coins)])})).then((t=>{var[e,n]=t;return j(j({},e),{},{route:n})})):M(t,e):Promise.reject(new Error("Value to sell not specified"))}function H(t,e){return t.valueToBuy&&Number(t.valueToBuy)?t.findRoute&&t.swapFrom!==E.c.BANCOR?Object(P.m)(t.coinToSell,t.coinToBuy,{buyAmount:t.valueToBuy,swapFrom:t.swapFrom},j(j({},e),{},{cache:G})).then((n=>{var r;return Promise.all([R(j(j({},t),{},{route:null===(r=n.coins)||void 0===r?void 0:r.map((t=>t.id)).slice(1,-1),swapFrom:n.swapType}),e),Promise.resolve(n.coins)])})).then((t=>{var[e,n]=t;return j(j({},e),{},{route:n})})):R(t,e):Promise.reject(new Error("Value to buy not specified"))}var V=new m.a({ttl:6e4,max:100}),W=new w.b(I,{cache:G},{cache:V}),U=Object(S.b)(I,{cache:V}),K=Object(S.c)(I,{cache:V}),z=(new S.a(I,{cache:V}),new O.a(I,{cache:V}))},612:function(t,e,n){"use strict";var r=n(277),o=(n(109),n(640)),l=n(601),c=n(61),d=n(1),m=n(603),f=n(632),h=["input"];var v={ideFix:null,MAX_ITEM_COUNT:6,components:{VueSimpleSuggest:o.a,Loader:m.a,InputUppercase:f.a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:String,default:""},$value:{type:Object,required:!0},label:{type:String,required:!0},coinList:{type:Array},coinType:{type:String,default:d.j.ANY},selectMode:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},data:()=>({}),computed:{listeners(){var t=this.$listeners,{input:input}=t;return Object(r.a)(t,h)},currentCoinList(){return(this.coinList||this.$store.state.explorer.coinList).filter((t=>"object"!=typeof t||function(t,e){var n,r=(null===(n=t.coin)||void 0===n?void 0:n.type)||t.type;if(!r)return!0;return e===d.j.ANY||(e===d.j.ANY_TOKEN?r===d.j.TOKEN||r===d.j.POOL_TOKEN:r===e)}(t,this.coinType))).map((t=>t.coin?t:t.symbol?t.symbol:t))},maxSuggestions(){return this.selectMode?50:6},verifiedMap(){var map={};return this.$store.state.explorer.coinList.forEach((t=>{t.verified&&(map[t.symbol]=!0)})),map}},watch:{currentCoinList(){var t=this.$refs.vss;t.canSend?t.research():t.getSuggestions(t.text).then((e=>{t.$set(t,"suggestions",e)}))}},methods:{getCoinIconUrl(t){return this.$store.getters["explorer/getCoinIcon"](t)},suggestionOrder(t){return t?this.currentCoinList.slice(0).sort(((a,b)=>a===t?-1:b===t?1:0)):this.currentCoinList},suggestionFilter(t,e){return!e||0===this.getSuggestionCoin(t).indexOf(e)},handleSuggestionClick(t,e){e.preventDefault()},getSuggestionCoin(t){var e;return(null===(e=t.coin)||void 0===e?void 0:e.symbol)||t},getSuggestionAmount(t){var e=t.value||t.amount;return e?"(".concat(Object(c.s)(e),")"):""},getIsVerified(t){var symbol=this.getSuggestionCoin(t);return this.verifiedMap[symbol]}}},y=n(40),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error}},[n("VueSimpleSuggest",{ref:"vss",attrs:{value:t.value,list:t.suggestionOrder,"max-suggestions":t.maxSuggestions,"min-length":0,"filter-by-query":!0,filter:t.suggestionFilter,"display-attribute":"coin.symbol","value-attribute":"coin.symbol",destyled:!0,controls:{showList:[38,40]}},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)},"suggestion-click":t.handleSuggestionClick},scopedSlots:t._u([{key:"suggestion-item",fn:function(e){var r=e.suggestion;return n("div",{},[n("img",{staticClass:"suggestion__coin-icon",attrs:{src:t.getCoinIconUrl(t.getSuggestionCoin(r)),width:"20",height:"20",alt:"",role:"presentation"}}),t._v(" "),n("span",{staticClass:"suggestion__coin-symbol"},[t._v(t._s(t.getSuggestionCoin(r)))]),t._v(" "),t.getIsVerified(r)?n("img",{staticClass:"suggestion__coin-verified",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-verified.svg",alt:"Verified",width:"12",height:"12"}}):t._e(),t._v(" "),t.getSuggestionAmount(r)?n("span",[t._v(t._s(t.getSuggestionAmount(r)))]):t._e()])}}])},[n("InputUppercase",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",value:t.value}},"InputUppercase",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1),t._v(" "),n("Loader",{staticClass:"form-field__icon form-field__icon--loader",attrs:{isLoading:t.isLoading}})],1)}),[],!1,null,null,null);e.a=component.exports},615:function(t,e,n){"use strict";var r=n(27),o=n(277),l=(n(670),n(688)),c=["input"];function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={imaskAmount:{mask:Number,scale:18,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[",","ю","Ю","б","Б"]},directives:{imask:l.a},props:{value:{type:[String,Number],default:""},scale:{type:[String,Number]}},emits:["input"],data:()=>({maskedValue:""}),computed:{listeners(){var t=this.$listeners,{input:input}=t;return Object(o.a)(t,c)},imaskOptions(){var t;return m(m({},this.$options.imaskAmount),{},{scale:null!==(t=this.scale)&&void 0!==t?t:this.$options.imaskAmount.scale})}},watch:{value(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted(){this.updateMaskState(this.value)},methods:{updateMaskState(t){if(this.$refs.input.maskRef){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}}},onAcceptInput(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},h=n(40),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.imaskOptions,expression:"imaskOptions"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"decimal"},on:{accept:function(e){return t.onAcceptInput(e)}}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},619:function(t,e,n){"use strict";var r=n(61),o={props:{amount:{type:[String,Number],required:!0},coin:{type:String,default:""},tag:{type:String,default:"span"},exact:{type:Boolean,default:!1},significant:{type:Boolean,default:!1},coinFirst:{type:Boolean,default:!1},baseCoinAmount:{type:[String,Number]},prefix:{type:String},suffix:{type:String}},computed:{amountUsd(){var t;return this.coin===this.$store.getters.BASE_COIN&&this.amount>0?t=this.amount:this.baseCoinAmount&&(t=this.baseCoinAmount),t*this.$store.getters["explorer/bipPriceUsd"]}},methods:{pretty:r.s,prettyExact:r.t,prettyAmount(t){return this.exact?Object(r.t)(t):this.significant?Object(r.c)(t):Object(r.s)(t)}}},l=n(40),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component"},[t.prefix?[t._v(t._s(t.prefix))]:t._e(),t.coinFirst?[t._v(t._s(t.coin)+" ")]:t._e(),n("span",{attrs:{title:t.exact?"":t.prettyExact(t.amount)}},[t._v(t._s(t.prettyAmount(t.amount)))]),t.coinFirst?t._e():[t._v(" "+t._s(t.coin))],t._v(" "),t.baseCoinAmount&&t.coin!==t.$store.getters.BASE_COIN?n("span",{staticClass:"u-display-ib"},[t._v("("+t._s(t.pretty(t.baseCoinAmount))+" "+t._s(t.$store.getters.BASE_COIN)+")")]):t._e(),t._v(" "),t.amountUsd?n("span",{staticClass:"u-text-muted"},[t._v("($"+t._s(t.pretty(t.amountUsd))+")")]):t._e(),t._v(" "),t.suffix?[t._v(t._s(t.suffix))]:t._e()],2)}),[],!1,null,null,null);e.a=component.exports},620:function(t,e,n){"use strict";var r={props:{isOpen:{type:Boolean,default:!1},hideCloseButton:{type:Boolean,default:!1},modalClass:{type:String,default:""},modalContainerClass:{type:String,default:""},keepMarkup:{type:Boolean,default:!1}},data:()=>({elFocusedBeforeOpen:null}),watch:{isOpen(t){t?(this.elFocusedBeforeOpen=document.activeElement,setTimeout((()=>{if("function"==typeof this.$el.querySelector){var t=this.$el.querySelector("[data-focus-on-open]");t&&t.focus()}}),0)):setTimeout((()=>{this.elFocusedBeforeOpen&&setTimeout((()=>{this.elFocusedBeforeOpen.focus(),this.elFocusedBeforeOpen=null}),0)}),0)}},methods:{closeModal(){this.$emit("update:isOpen",!1),this.$emit("modal-close")},handleModalClick(t){this.hideCloseButton||this.$refs.modalContainer&&t.target!==this.$refs.modalContainer&&!this.$refs.modalContainer.contains(t.target)&&this.closeModal()},handleModalKeydown(t){this.hideCloseButton||"Escape"!==t.code&&27!==t.keyCode||(t.preventDefault(),this.closeModal())}}},o=n(40),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"v-transition-modal"}},[t.isOpen||t.keepMarkup?n("div",{staticClass:"modal-wrap"},[n("transition",{attrs:{name:"v-transition-modal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||!t.keepMarkup,expression:"isOpen || !keepMarkup"}],staticClass:"modal u-container u-container--wide",class:t.modalClass,attrs:{tabindex:"-1",role:"dialog"},on:{click:t.handleModalClick,keydown:t.handleModalKeydown}},[t.hideCloseButton?t._e():n("button",{staticClass:"modal__close u-semantic-button link--opacity",attrs:{type:"button"}},[n("span",{staticClass:"modal__close-icon"},[t._v("Close")])]),t._v(" "),n("div",{staticClass:"modal__wrap"},[n("div",{ref:"modalContainer",staticClass:"modal__container",class:t.modalContainerClass},[t._t("default")],2)])])])],1):t._e()])}),[],!1,null,null,null);e.a=component.exports},626:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1);function o(text,t){var e="ru"===t?"Консоль":"Console";return text?r.d+e+". "+text+r.c:r.d+e+r.c}},627:function(t,e,n){},630:function(t,e,n){"use strict";var r=n(635),o=n(631),l={components:{InlineSvg:r.a,ButtonCopy:o.a},props:{copyText:{type:String,required:!0}}},c=n(40),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ButtonCopy",{staticClass:"u-icon u-semantic-button link--opacity",attrs:{"aria-label":"Copy","copy-text":t.copyText}},[n("InlineSvg",{attrs:{src:t.BASE_URL_PREFIX+"/img/icon-copy.svg"}})],1)}),[],!1,null,null,null);e.a=component.exports},631:function(t,e,n){"use strict";n(8);var r=n(639),o={props:{copyText:{type:String,required:!0}},computed:{isClipboardSupported:()=>r.b()},methods:{copy(t){r.a(t.toString())&&this.$store.commit("SET_SNACKBAR_ACTIVE")}}},l=n(40),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isClipboardSupported?n("button",{attrs:{type:"button"},on:{click:function(e){return t.copy(t.copyText)}}},[t._t("default")],2):t._e()}),[],!1,null,null,null);e.a=component.exports},632:function(t,e,n){"use strict";var r=n(277),o=["input","blur","focus"],l={props:{value:{type:String,default:""}},computed:{listeners(){var t=this.$listeners,{input:input,blur:e,focus:n}=t;return Object(r.a)(t,o)}},mounted:function(){this.updateValue(this.$refs.input.value)},methods:{updateValue:function(t){(t=t.toUpperCase())!==this.value&&this.$emit("input",t)}}},c=n(40),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({ref:"input",domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},633:function(t,e,n){"use strict";n.d(e,"b",(function(){return d}));n(4),n(20),n(8);var r=n(62),o=n(602),l=n(601),c=n(61);function d(t,e){if(!function(t,e){var n=Object(o.m)(e);if(!n&&t.symbol===e)return!0;if(n&&t.id===e)return!0;return!1}(t.coin,null==e?void 0:e.coin))return t.amount;var n=(null==e?void 0:e.value)||0,l=new r.c(t.amount).minus(n).toString();return l>0?l:"0"}var m={components:{InputMaskedAmount:n(615).a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},maxValue:{type:[String,Number],default:void 0},addressBalance:{type:Array,default:()=>[]},selectedCoinSymbol:{type:String,default:""},fee:{type:[Object,null],default:null}},data:()=>({isUseMax:!1}),computed:{maxValueComputed(){if(void 0!==this.maxValue)return this.maxValue;var t=this.addressBalance.find((t=>t.coin.symbol===this.selectedCoinSymbol));return t?d(t,this.fee):void 0},isMaxValueDefined(){return void 0!==this.maxValueComputed&&this.maxValueComputed>0},isMaxValueRounded(){return this.isMaxValueDefined&&!new r.c(this.maxValueComputed).eq(Object(c.s)(this.maxValueComputed).replace(/\s/g,""))}},watch:{value(t){(t||0===t)&&this.isMaxValueDefined&&new r.c(t).eq(this.maxValueComputed)||(this.isUseMax=!1)},maxValueComputed(t){this.isMaxValueDefined&&this.isUseMax&&this.useMax()}},methods:{pretty:c.s,useMax(){if(!this.isMaxValueDefined)return!1;this.isUseMax=!0,this.$emit("input",this.maxValueComputed),this.$emit("use-max"),this.$value.$touch()}}},f=n(40),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error,"form-field--with-use-max":t.isMaxValueDefined}},[n("InputMaskedAmount",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal",value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}},nativeOn:{input:function(e){return t.$emit("input-native",e)}}},"InputMaskedAmount",t.$attrs,!1)),t._v(" "),t.isMaxValueDefined?n("button",{staticClass:"form-field__use-max link--main link--opacity u-semantic-button",attrs:{type:"button"},on:{click:t.useMax}},[t._v("Use max")]):t._e(),t._v(" "),t.isMaxValueDefined&&!t.isUseMax?n("span",{staticClass:"form-field__max-available"},[t._v("\n        "+t._s(t.isMaxValueRounded?"≈":"")+t._s(t.pretty(t.maxValueComputed))+"\n    ")]):t._e(),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null);e.a=component.exports},642:function(t,e,n){"use strict";n(627)},681:function(t,e){},687:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"l",(function(){return w})),n.d(e,"c",(function(){return A})),n.d(e,"k",(function(){return P})),n.d(e,"j",(function(){return $})),n.d(e,"i",(function(){return k})),n.d(e,"e",(function(){return B})),n.d(e,"g",(function(){return R})),n.d(e,"h",(function(){return V})),n.d(e,"d",(function(){return W})),n.d(e,"f",(function(){return U}));var r=n(9),o=n(27),l=(n(226),n(21),n(6),n(11),n(817),n(820),n(8),n(62)),c=n(789),d=n.n(c),m=n(628),f=n.n(m),h=n(285),v=n(1),y=n(781);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=5,w=f.a,E=new d.a(v.f),S=new d.a(v.l),O=new d.a(v.f);e.b={eth:E,utils:f.a};[E,S,O].forEach((t=>t.transactionPollingInterval=5e3));var x=18;function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=Math.max(x-e,0);return t=new l.c(10).pow(n).times(t).toFixed(0),f.a.fromWei(t,"ether")}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;t=new l.c(t).toFixed(Number(e)),t=f.a.toWei(t,"ether");var n=Math.max(x-e,0),r=new l.c(10).pow(n);return new l.c(t).div(r).toFixed(0)}function $(t){var e,{confirmationCount:n=C,chainId:r,needReceipt:o=!0,needExactConfirmationCount:l=C>1,needExactTimestamp:c=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=new h.TinyEmitter;try{var f=H(r);if(f){var v=new d.a(f);e=j(t,{confirmationCount:n,ethProvider:v,emitter:m,needReceipt:o,needExactConfirmationCount:l,needExactTimestamp:c})}else e=Promise.reject(new Error("Can't subscribe to tx, chainId ".concat(r," is not supported")))}catch(t){e=Promise.reject(t)}return y(e,m),e.unsubscribe=function(){!0,m.off("tx"),m.off("confirmation"),m.off("confirmed")},e;function y(t,e){t.on=function(){return e.on(...arguments),t},t.once=function(){return e.once(...arguments),t}}}function j(t,e){var{confirmationCount:n,ethProvider:r,emitter:o,needReceipt:l,needExactConfirmationCount:c,needExactTimestamp:d}=e;return function t(e){return r.getTransaction(e).then((n=>(n&&o.emit("tx",n),n&&n.blockHash?n:L(1e4).then((()=>t(e))))))}(t).then((e=>Promise.all([l?r.getTransactionReceipt(t):Promise.resolve(),d?r.getBlock(e.blockNumber):Promise.resolve(),c?f(e):Promise.resolve(1),Promise.resolve(e)]))).then((t=>{var[e,r,f,h]=t,v=T(T(T({},h),e),{},{confirmations:f,timestamp:d?1e3*r.timestamp:Date.now()});if(o.emit("confirmation",v),l&&!v.status)throw new Error("Transaction failed");return f>=n||!c?v:m(v)})).then((t=>(o.emit("confirmed",t),t)));function m(t){return L(1e4).then((()=>f(t))).then((e=>(t=T(T({},t),{},{confirmations:e}),o.emit("confirmation",t),e>=n?t:m(t))))}function f(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,e=t.currentProvider.host,n=e===I.providerHost;if(I.isLoading&&n)return I.promise;if(Date.now()-I.timestamp<5e3&&n)return I.promise;var r=t.getBlockNumber();return I.isLoading=!0,I.providerHost=e,I.promise=r,r.then((()=>{e===I.providerHost&&(I.isLoading=!1,I.timestamp=Date.now())})).catch((t=>{throw e===I.providerHost&&(I.isLoading=!1),t})),r}(r).then((e=>e-t.blockNumber+1))}}function L(time){return new Promise((t=>{setTimeout(t,time)}))}var I={isLoading:!1,timestamp:0,providerHost:"",promise:null};var D={};function k(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return Promise.reject(new Error("chainId not specified"));if(null!==(n=D[e])&&void 0!==n&&n[t])return D[e][t];var o=R(r,e).find((e=>e.externalTokenId===t));if(o)return Promise.resolve(Number(o.externalDecimals));var l=F(e),c=new l.Contract(y.a,t),d=c.methods.decimals().call().then((t=>Number(t))).catch((n=>(console.log(n),delete D[e][t],x)));return D[e]||(D[e]={}),D[e][t]=d,d}function B(t,e,n,r){return N.apply(this,arguments)}function N(){return(N=Object(r.a)((function*(t,e,n,r){var o,l,c;e=Number(t.chainId||e);var d,m,h,input=t.input.slice(10),y=input.length/64,_=null===(o=v.u[e])||void 0===o?void 0:o.hubContractAddress,T=null===(l=v.u[e])||void 0===l?void 0:l.wrappedNativeContractAddress;if(2===y){var C="0x"+input.slice(0,64);if(!(E.abi.decodeParameter("address",C).toLowerCase()===_))return{type:v.x.OTHER};d=v.x.UNLOCK,m=t.to,h=r?0:yield G(input.slice(64*(y-1)),m,e,n)}else if(t.to.toLowerCase()===_&&5===y){d=v.x.SEND;var w="0x"+input.slice(0,64);m=E.abi.decodeParameter("address",w),h=r?0:yield G(input.slice(64*(y-2)),m,e,n)}else if(t.to.toLowerCase()===_&&3===y)d=v.x.SEND,m=T,h=f.a.fromWei(t.value);else if(t.to.toLowerCase()===T&&1===y)d=v.x.UNWRAP,m=t.to,h=r?0:yield G(input,m,e,n);else{if(t.to.toLowerCase()!==T||0!==y)return{type:v.x.OTHER};d=v.x.WRAP,m=t.to,h=f.a.fromWei(t.value)}m=null===(c=m)||void 0===c?void 0:c.toLowerCase();var S=R(n,e).find((t=>t.externalTokenId===m)),O=null==S?void 0:S.denom.toUpperCase();return{type:d,tokenContract:m,tokenName:O,amount:h}}))).apply(this,arguments)}function G(t,e,n,r){return M.apply(this,arguments)}function M(){return(M=Object(r.a)((function*(t,e,n,r){var o="0x"+t,l=yield k(e,n,r);return A(E.abi.decodeParameter("uint256",o),l)}))).apply(this,arguments)}function R(t,e){var n=Object.values(v.w);return e&&(n=n.filter((t=>t===V(e)))),t.map((t=>n.map((e=>t[e])))).flat().filter((t=>!!t))}function F(t){return K(t),t?t===v.m?S:t===v.g?O:void 0:E}function H(t){var e;return K(t),t?null===(e=v.v[V(t)])||void 0===e?void 0:e.apiUrl:E.currentProvider.host}function V(t){var e;return K(t),null===(e=v.u[t])||void 0===e?void 0:e.hubChainId}function W(t){return v.v[t].chainId}function U(t){switch(t=Number(t)){case 1:return"Ethereum";case 3:return"Ropsten";case 4:return"Rinkeby";case 42:return"Kovan";case 56:return"BSC";case 97:return"BSC Testnet";default:return t.toString()}}function K(t){if(t&&"number"!=typeof t)throw new Error("chainId should be a number")}},781:function(t,e,n){"use strict";e.a=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}]},782:function(t,e,n){"use strict";var r=n(59),o=n(211),l=n(268),c=Math.max,d=Math.min;e.a=function(t,e,n){var m,f,h,v,y,_,T=0,C=!1,w=!1,E=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function S(time){var e=m,n=f;return m=f=void 0,T=time,v=t.apply(n,e)}function O(time){return T=time,y=setTimeout(A,e),C?S(time):v}function x(time){var t=time-_;return void 0===_||t>=e||t<0||w&&time-T>=h}function A(){var time=Object(o.a)();if(x(time))return P(time);y=setTimeout(A,function(time){var t=e-(time-_);return w?d(t,h-(time-T)):t}(time))}function P(time){return y=void 0,E&&m?S(time):(m=f=void 0,v)}function $(){var time=Object(o.a)(),t=x(time);if(m=arguments,f=this,_=time,t){if(void 0===y)return O(_);if(w)return clearTimeout(y),y=setTimeout(A,e),S(_)}return void 0===y&&(y=setTimeout(A,e)),v}return e=Object(l.a)(e)||0,Object(r.a)(n)&&(C=!!n.leading,h=(w="maxWait"in n)?c(Object(l.a)(n.maxWait)||0,e):h,E="trailing"in n?!!n.trailing:E),$.cancel=function(){void 0!==y&&clearTimeout(y),T=0,m=_=f=y=void 0},$.flush=function(){return void 0===y?v:P(Object(o.a)())},$.pending=function(){return void 0!==y},$}},810:function(t,e,n){"use strict";(function(t){var r=n(277),o=n(27),l=n(9),c=(n(413),n(6),n(21),n(11),n(54),n(63),n(4),n(20),n(8),n(283),n(109),n(48),n(650)),d=n(606),m=n(605),f=n(607),h=n(172),v=n(793),y=n(1076),_=n(733),T=n(661),C=n(609),w=n(19),E=n(67),S=n(687),O=n(284),x=n(47),A=n(611),P=n(62),$=n(61),j=n(781),L=n(1003),I=n(1004),D=n(782),k=n(1),B=n(276),N=n(601),G=n(619),M=n(603),R=n(620),F=n(630),H=n(633),V=n(612),W=n(1124),U=n(1125),K=["tx"];function z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var X,J,Q,Z=y.abi,tt="finished",et="rejected",nt="pending",it="Canceled";function at(t){return new S.b.eth.Contract(j.a,t)}var st=k.y,ot=new S.b.eth.Contract(L.a,st),ut=new S.b.eth.Contract(I.a,k.N).methods.deposit().encodeABI(),lt=v.e[k.m],ct={ETH:{testnetSymbol:"TESTWETH",smallAmount:1e-4},USDTE:{testnetSymbol:"USDC",smallAmount:.1},HUB:{testnetSymbol:"TESTHUB",smallAmount:.01}},pt=k.H===k.D?"ETH":ct.ETH.testnetSymbol,mt=Object(h.a)({type:"validAmount"},(t=>parseFloat(t)>=0));function ft(time){return new Promise((t=>{setTimeout(t,time)}))}e.a={TX_WRAP:"wrap",TX_APPROVE:"approve",TX_TRANSFER:"transfer",DEPOSIT_SYMBOL:pt,LOADING_STAGE:k.t,components:{QrcodeVue:c.a,BaseAmount:G.a,Loader:M.a,Modal:R.a,ButtonCopyIcon:F.a,FieldUseMax:H.a,FieldCoin:V.a,HubBuyTxListItem:W.a,HubBuySpeedup:U.a},directives:{autosize:C.a,checkEmpty:N.a},mixins:[d.a],fetch(){return Promise.all([Object(O.c)(),Object(O.e)()]).then((t=>{var[e,n]=t;this.hubCoinList=Object.freeze(e),this.priceList=Object.freeze(n)})).then((()=>ft(1))).then((()=>Promise.all([this.updateBalance(),this.getAllowance()])))},data(){return{coinToDepositBalance:0,ethBalance:0,uniswapPair:null,balanceRequest:null,coinToDepositUnlocked:0,allowanceRequest:null,form:{amountEth:"",coinToGet:this.$route.query.coin||"",amountToGet:""},hubCoinList:[],priceList:[],steps:{},loadingStage:"",isFormSending:!1,serverError:"",isConfirmModalVisible:!1,recovery:null,estimation:null,estimationRoute:null,isEstimationLoading:!1,estimationError:!1,isEstimationPending:!1,debouncedGetEstimation:null}},validations(){return{form:{amountEth:{required:m.a,validAmount:mt,minValue:t=>t>0,enoughToPayFee:t=>t>=this.ethTotalFee},coinToGet:{required:m.a,minLength:Object(f.a)(3),supported:symbol=>this.suggestionList.includes(symbol)},amountToGet:{}}}},computed:{ethAddress(){return this.$store.getters.address.replace("Mx","0x")},ethGasPriceGwei(){var t,e=this.priceList.find((t=>"eth/gas"===t.name));return t=e?e.value/10**18:100,k.H===k.D?t:10*t},ethTotalFee(){var t=5e4+(this.isCoinApproved?0:75e3)+75e3,e=S.b.utils.fromWei(S.b.utils.toWei(this.ethGasPriceGwei.toString(),"gwei"),"ether");return new P.c(e).times(t).toString()},ethFeeImpact(){return this.form.amountEth>0?new P.c(this.ethTotalFee).div(this.form.amountEth).times(100):0},ethToTopUp(){var t=new P.c(this.form.amountEth||0).minus(this.ethBalance);return t=t.gt(0)?t.toString():0},ethToWrap(){var t=new P.c(this.form.amountEth||0).minus(this.ethTotalFee);return t=t.gt(0)?t.toString():0},hubFeeRate(){var t=this.hubCoinList.find((t=>t.symbol===pt));return(null==t?void 0:t.customCommission)||.01},hubFee(){var input=this.ethToWrap;return new P.c(input||0).times(this.hubFeeRate).toString()},coinAmountAfterBridge(){var input=this.ethToWrap;return new P.c(input||0).minus(this.hubFee).toString()},maxAmount(){return this.ethBalance},coinEthereumName(){var t=this.hubCoinList.find((t=>t.symbol===pt));return t?t.denom.toUpperCase():pt},coinContractAddress(){var t=this.hubCoinList.find((t=>t.symbol===pt));return t?t.ethAddr:v.e[k.m].address},coinDecimals(){if(this.coinContractAddress){var t=this.hubCoinList.find((t=>t.ethAddr===this.coinContractAddress));return t?Number(t.ethDecimals):void 0}},isCoinApproved(){var t=new P.c(this.coinToDepositUnlocked);return t.gt(0)&&t.gt(this.form.amountEth||0)},suggestionList(){return[this.$store.getters.BASE_COIN,"HUB"]},currentEstimation(){return this.$v.form.$invalid||!this.estimation||this.isEstimationWaiting||this.estimationError?0:this.estimation},isEstimationWaiting(){return this.isEstimationPending||this.isEstimationLoading},isEstimationErrorVisible(){return this.estimationError&&!this.isEstimationWaiting},stepsOrdered(){var t=Object.values(k.t).reverse(),e=[];return t.forEach((t=>{this.steps[t]&&e.push({step:this.steps[t],loadingStage:t})})),e},deepLink(){return"ethereum:".concat(this.ethAddress,"?value=").concat(1e18*this.ethToTopUp,"&amount=").concat(this.ethToTopUp)}},watch:{"form.coinToGet":{handler(){this.watchEstimation()}},coinAmountAfterBridge:{handler(){this.watchEstimation()}}},mounted(){this.debouncedGetEstimation=Object(D.a)(this.getEstimation,1e3);var t=window.localStorage.getItem("hub-buy-recovery");if(t)try{var e=JSON.parse(t);(null==e?void 0:e.address)===this.$store.getters.address&&(this.recovery=e)}catch(t){console.log(t)}J=setInterval((()=>{this.isFormSending||(this.updateBalance(),this.getAllowance())}),6e4),Q=setInterval((()=>{this.isFormSending||Object(O.e)().then((t=>{this.priceList=Object.freeze(t)}))}),15e3)},destroyed(){clearInterval(J),clearInterval(Q)},methods:{pretty:$.s,prettyPrecise:$.v,prettyExact:$.t,prettyRound:$.x,getExplorerTxUrl:$.l,updateBalance(){var t;if(!this.coinContractAddress)return Promise.reject();if((null===(t=this.balanceRequest)||void 0===t?void 0:t.promiseStatus)===nt)return this.balanceRequest.promise;var e=Promise.all([Promise.resolve(0),S.b.eth.getBalance(this.ethAddress)]).then((t=>{var[n,r]=t;this.ethBalance=S.b.utils.fromWei(r),this.balanceRequest={promiseStatus:tt,promise:e}})).catch((t=>{console.log(t),this.balanceRequest={promiseStatus:et,promise:e},this.serverError="Can't get balance"}));return e},getAllowance(){var t;if(this.coinContractAddress&&(null===(t=this.allowanceRequest)||void 0===t?void 0:t.promiseStatus)!==nt){var e=at(this.coinContractAddress).methods.allowance(this.ethAddress,st).call().then((t=>{this.coinToDepositUnlocked=Object(S.c)(t,this.coinDecimals),this.allowanceRequest={promiseStatus:tt,promise:e}})).catch((t=>{console.log(t),this.coinToDepositUnlocked=0,this.allowanceRequest={promiseStatus:et,promise:e},this.serverError="Can't get allowance"}));return this.allowanceRequest={promiseStatus:nt,promise:e},e}},fetchUniswapPair(){var t,e,n,r;if(this.coinContractAddress&&this.coinDecimals)return(t=this.coinContractAddress,e=this.coinDecimals,n=new v.d(k.m,t,e),r=k.H===k.D?new _.a("homestead"):new T.a(k.l,"ropsten"),v.a.fetchPairData(n,lt,r).then((t=>Object.freeze(t)))).then((t=>{this.uniswapPair=t}))},ensureNetworkData(){if(!this.hubCoinList.length||!this.priceList.length)return this.$fetch();var t=this.allowanceRequest&&this.allowanceRequest.promiseStatus!==et?this.allowanceRequest.promise:this.getAllowance();return Promise.all([t])},recoverPurchase(){this.$store.state.onLine&&(this.form=this.recovery.form,this.steps=this.recovery.steps,this.recovery=null,this.submit({fromRecovery:!0}))},waitEnoughEth(){return this.ethBalance>=this.form.amountEth?Promise.resolve():(this.loadingStage=k.t.WAIT_ETH,new Promise(((t,e)=>{var n={value:!1};X=()=>{e(new Error(it)),n.value=!0,X=null},this._waitEnoughEth(n).then(t).catch(e)})))},_waitEnoughEth(t){return this.updateBalance().then((()=>t.value?Promise.reject(new Error(it)):this.ethBalance>=this.form.amountEth||ft(1e4).then((()=>this._waitEnoughEth(t)))))},submitConfirm(){!this.isFormSending&&this.$store.state.onLine&&(this.$v.$invalid?this.$v.$touch():this.ethToTopUp>0?this.submit():this.isConfirmModalVisible=!0)},submit(){var{fromRecovery:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.$store.state.onLine){if(t||!this.$v.$invalid){this.isConfirmModalVisible=!1,this.isFormSending=!0,this.serverError="",t||(this.steps={});var e=t?Promise.resolve():this.waitEnoughEth();return Promise.all([e,this.ensureNetworkData()]).then((()=>this.depositFromEthereum())).then((t=>{if(t.status!==k.A.batch_executed)throw new Error("Unsuccessful bridge transfer: ".concat(t.status));return console.log({transfer:t}),Object(x.n)(t.outTxHash)})).then((t=>{if(console.log("minterTx"),console.log(t),!t.data.list)throw new Error("Minter tx transfer has invalid data");var e=t.data.list.find((t=>t.to===this.$store.getters.address&&t.coin.symbol===pt));if(!e)throw new Error("Minter tx transfer does not include ".concat(pt," deposit to the current user"));var n=e.value;return this.addStepData(k.t.WAIT_BRIDGE,{amount:n,tx:t,finished:!0}),this.loadingStage=k.t.SWAP_MINTER,this.addStepData(k.t.SWAP_MINTER,{coin0:pt,amount0:n,coin1:this.form.coinToGet}),this.sendMinterSwapTx(n).then((t=>{this.addStepData(k.t.SWAP_MINTER,{tx:t,amount1:Object(E.a)(t.tags["tx.return"]),finished:!0}),this.loadingStage=k.t.FINISH,this.addStepData(k.t.FINISH,{coin:this.form.coinToGet,amount:Object(E.a)(t.tags["tx.return"]),finished:!0})}))})).then((()=>{this.$v.$reset(),this.form.amountEth="",this.form.coinToGet="",this.form.amountToGet=""})).catch((t=>{t.message!==it&&(this.serverError=Object(B.a)(t),console.error(t)),this.loadingStage===k.t.WAIT_ETH&&this.finishSending()}))}this.$v.$touch()}},retrySending(){this.submit({fromRecovery:!0})},finishSending(){this.isFormSending=!1,"function"==typeof X&&X(),this.steps={},window.localStorage.removeItem("hub-buy-recovery"),this.$fetch()},depositFromEthereum(){var t=this;return Object(l.a)((function*(){t.loadingStage=k.t.WRAP_ETH,t.addStepData(k.t.WRAP_ETH,{amount:t.ethToWrap});var e=yield S.b.eth.getTransactionCount(t.ethAddress,"latest");t.sendWrapTx({nonce:e,gasPrice:t.ethGasPriceGwei});var n=t.waitPendingStep(k.t.WRAP_ETH);t.isCoinApproved&&!t.steps[k.t.APPROVE_BRIDGE]||(t.addStepData(k.t.APPROVE_BRIDGE,{coin:t.coinEthereumName}),e+=1,t.sendApproveTx({nonce:e,gasPrice:t.ethGasPriceGwei+1}));var r=yield n,o=Object(S.k)(t.ethToWrap,t.coinDecimals),l=Object(S.c)(o,t.coinDecimals);t.loadingStage=k.t.SEND_BRIDGE,t.addStepData(k.t.SEND_BRIDGE,{coin:t.coinEthereumName,amount:l});var c=t.steps[k.t.APPROVE_BRIDGE]?r.nonce+2:r.nonce+1;t.sendCoinTx({amount:o,nonce:c});var d=yield t.waitPendingStep(k.t.SEND_BRIDGE);return t.loadingStage=k.t.WAIT_BRIDGE,t.addStepData(k.t.WAIT_BRIDGE,{coin:pt}),Object(O.h)(d.transactionHash)}))()},sendUniswapTx(){var{nonce:t,gasPrice:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.uniswapPair.liquidityToken.address,r=new S.b.eth.Contract(Z,n),o=Object(S.k)(new P.c(this.uniswapEstimation.output).times(.97).toString(),this.coinDecimals),l=Math.floor(Date.now()/1e3)+1800,data=r.methods.swapExactETHForTokens(o,[lt.address,this.coinContractAddress],this.ethAddress,l).encodeABI();return this.sendEthTx({to:"0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",data:data,value:this.ethToSwap,nonce:t,gasPrice:e,gasLimit:2e5},k.t.SWAP_ETH)},sendWrapTx(){var{nonce:t,gasPrice:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.sendEthTx({to:k.N,value:this.ethToWrap,data:ut,nonce:t,gasPrice:e,gasLimit:5e4},k.t.WRAP_ETH)},sendApproveTx(){var{nonce:t,gasPrice:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=at(this.coinContractAddress).methods.approve(st,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").encodeABI();return this.sendEthTx({to:this.coinContractAddress,data:data,nonce:t,gasPrice:e,gasLimit:75e3},k.t.APPROVE_BRIDGE)},sendCoinTx(e){var address,{amount:n,nonce:r}=e;address=t.concat([t.alloc(12),t.from(S.b.utils.hexToBytes(this.$store.getters.address.replace("Mx","0x")))]);var o=t.from("minter","utf-8"),data=ot.methods.transferToChain(this.coinContractAddress,o,address,n,0).encodeABI();return this.sendEthTx({to:st,data:data,nonce:r,gasLimit:75e3},k.t.SEND_BRIDGE)},speedup(t){var{txParams:e,loadingStage:n}=t;return this.sendEthTx(e,n,!0)},sendEthTx(t,e,n){var r=this;return Object(l.a)((function*(){var{to:o,value:l,data:data,nonce:c,gasPrice:d,gasLimit:m}=t,f=r.steps[e];if(null!=f&&f.finished)return f.tx;if(null!=f&&f.tx&&!n)return Object(S.j)(f.tx.hash,{confirmationCount:0}).then((t=>(console.log("subscribeTransaction",t),r.addStepData(e,{tx:t,finished:!0}),r.steps[e].tx)));c=c||0===c?c:yield S.b.eth.getTransactionCount(r.ethAddress,"latest");var h=e===k.t.SEND_BRIDGE&&!n;m=m&&!h?m:yield r.estimateTxGas({to:o,value:l,data:data}),d=(d||r.ethGasPriceGwei||1).toString();var v={to:o,value:l?Object(S.k)(l,18):"0x00",data:data,nonce:c,gasPrice:S.b.utils.toWei(d,"gwei"),gas:m,chainId:k.m};console.log("send",v);var y,{rawTransaction:_}=yield S.b.eth.accounts.signTransaction(v,r.$store.getters.privateKey);return S.b.eth.sendSignedTransaction(_).on("transactionHash",(t=>{y=t,console.log(y);var n={hash:y,timestamp:(new Date).toISOString(),params:{to:o,value:l,data:data,nonce:c,gasPrice:d,gasLimit:m}};r.addStepData(e,{tx:n})})).on("receipt",(t=>{console.log("receipt:",t),r.addStepData(e,{tx:t,finished:!0})})).on("error",(function(t){console.log(t),this.addStepData(e,{tx:{hash:y,error:t}})}))}))()},estimateTxGas(t){var{to:e,value:n,data:data}=t,r={from:this.ethAddress,to:e,value:n?Object(S.k)(n):"0x00",data:data};return S.b.eth.estimateGas(r).then((t=>{if(t>1e6)throw new Error("Gas limit estimate is too high: ".concat(t,". Probably tx will be failed."));return t}))},sendMinterSwapTx(t){return this.forceEstimation().then((()=>{var e=this.$store.getters.balance.find((t=>t.coin.symbol===pt)),n=(null==e?void 0:e.amount)||0,r=ct.ETH.smallAmount,o={type:n-t<r?w.a.SELL_ALL_SWAP_POOL:w.a.SELL_SWAP_POOL,data:{coins:this.estimationRoute?this.estimationRoute.map((t=>t.id)):[pt,this.form.coinToGet],valueToSell:t,minimumValueToBuy:0},gasCoin:pt};return Object(A.h)(o,{privateKey:this.$store.getters.privateKey})})).then((t=>t=Object.freeze(Y(Y({},t),{},{timestamp:(new Date).toISOString()}))))},inputBlur(){this.debouncedGetEstimation.pending()&&this.debouncedGetEstimation.flush()},watchEstimation(){this.$store.state.onLine&&(this.$v.form.$invalid||(this.debouncedGetEstimation(),this.isEstimationPending=!0))},getEstimation(){if(this.isEstimationPending=!1,this.$store.state.onLine&&!this.$v.form.$invalid)return this.isEstimationLoading=!0,this.estimationError=!1,Object(A.c)({coinToSell:pt,valueToSell:this.coinAmountAfterBridge,coinToBuy:this.form.coinToGet,swapFrom:k.K.POOL,findRoute:!0},{idPreventConcurrency:"hubBuy"}).then((t=>{this.estimation=t.will_get,this.estimationRoute=t.route,this.isEstimationLoading=!1})).catch((t=>{t.isCanceled||(this.isEstimationLoading=!1,this.estimationError=Object(B.a)(t,"Estimation error: "))}))},forceEstimation(){return this.debouncedGetEstimation(),this.debouncedGetEstimation.flush()},waitPendingStep(t){return this.steps[t]?new Promise(((e,n)=>{var r=setInterval((()=>{var o=this.steps[t],l=null!=o&&o.txList||null!=o&&o.tx?[o.tx]:[],c=l.filter((t=>t.error));if(l.length&&c.length===l.length)return l.length>1?n(l.slice().sort(((a,b)=>b.gasPrice-a.gasPrice))[0].error):n(l[0].error),void clearInterval(r);var d=l.find((t=>t.blockHash));d&&(e(d),clearInterval(r))}),1e3)})):Promise.reject()},addStepData(t,data){var e,{tx:n}=data,o=Object(r.a)(data,K);if(n){var l=this.steps[t],c=null!=l&&l.txList||null!=l&&l.tx?[l.tx]:[],d=c.findIndex((t=>{var e=n.hash||n.transactionHash;return(null==t?void 0:t.hash)===e}));if(d>-1&&(n=Y(Y({},c[d]),n)),data.finished?c=[n]:d>-1?c[d]=n:c.push(n),c.length>1){var m=c.slice().sort(((a,b)=>{var t,e;return(null===(t=b.params)||void 0===t?void 0:t.gasPrice)-(null===(e=a.params)||void 0===e?void 0:e.gasPrice)}))[0];e={txList:c,tx:m}}else 1===c.length&&(e={tx:c[0],txList:void 0})}this.$set(this.steps,t,Object.freeze(Y(Y(Y({},this.steps[t]),e),o)));var f=t!==k.t.FINISH;console.log({loadingStage:t,needSaveRecovery:f},Y(Y(Y({},this.steps[t]),e),o)),f?window.localStorage.setItem("hub-buy-recovery",JSON.stringify({steps:this.steps,form:this.form,address:this.$store.getters.address})):window.localStorage.removeItem("hub-buy-recovery")},cancelRecovery(){this.recovery=null,window.localStorage.removeItem("hub-buy-recovery")}}}}).call(this,n(7).Buffer)},918:function(t,e){},920:function(t,e){},925:function(t,e){},927:function(t,e){},934:function(t,e){},946:function(t,e){},949:function(t,e){},954:function(t,e){}}]);