(window.webpackJsonp=window.webpackJsonp||[]).push([[16,3],{1106:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(52),n(39),n(67);var r=n(97),o=n.n(r),c=n(6),l=n(100),d=o.a.create({baseURL:c.n,params:{apikey:c.m}});function f(address,t){return d.get("?module=account&action=txlist&address=".concat(address,"&sort=desc"),{params:t}).then((function(t){var e={};return t.data.result.filter((function(t){return!e[t.hash]&&(e[t.hash]=!0,!0)})).map((function(t){return t.status=!!Number(t.txreceiptStatus),t}))}))}Object(l.a)(d)},1110:function(t,e){},1153:function(t,e,n){"use strict";var r,o,c=n(102),l=n(1154),d=n(1126),f=n.n(d),m={data:function(){return{ethAddress:"",isConnectionStartedAndModalClosed:!1}},computed:{isConnected:function(){return!!this.ethAddress}},mounted:function(){this.initConnector(),r.connected&&"walletconnect"===window.localStorage.getItem("hub-deposit-connected-account")&&this.setEthAddress(r.accounts[0])},methods:{connectEth:function(){r||this.initConnector(),r.connected?this.setEthAddress(r.accounts[0]):r.createSession(),this.isConnectionStartedAndModalClosed&&r.uri&&f.a.open(r.uri,(function(){}))},disconnectEth:function(){r.killSession()},initConnector:function(){var t=this;(r=new l.a({bridge:"https://bridge.walletconnect.org",qrcodeModal:f.a})).on("connect",this.handleEvent),r.on("session_update",this.handleEvent),r.on("disconnect",this.handleEvent),r.on("modal_closed",(function(){t.isConnectionStartedAndModalClosed=!0}))},handleEvent:function(t,e){if(t)throw t;var n=e.params[0],o=n.accounts;n.chainId;o?this.setEthAddress(o[0]):(this.setEthAddress(""),r=null)},setEthAddress:function(t){this.ethAddress=t,this.$emit("update:address",t)},sendTransaction:function(t){return r.sendTransaction(t)}}},h=n(57),v=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"button",on:{click:t.connectEth}},[n("img",{staticClass:"button__icon",attrs:{alt:"",role:"presentation",src:t.BASE_URL_PREFIX+"/img/icon-walletconnect.png",srcset:t.BASE_URL_PREFIX+"/img/icon-walletconnect@2x.png 2x"}}),t._v(" "),n("span",[t._v("WalletConnect")])])}),[],!1,null,null,null).exports,_=n(16),y=(n(81),n(112),n(38),n(67),n(36),n(2),n(757)),C=n.n(y),w=n(6),x={data:function(){return{isAvailable:!1,ethAddress:""}},computed:{isConnected:function(){return!!this.ethAddress}},mounted:function(){var t=this;window.ethereum?(this.isAvailable=!0,"metamask"===window.localStorage.getItem("hub-deposit-connected-account")&&window.ethereum.request({method:"eth_accounts"}).then((function(e){e.length&&t.setEthAddress(e[0])})),window.ethereum.on("accountsChanged",(function(e){t.setEthAddress(e[0]||"")}))):this.isAvailable=!1},methods:{connectEth:function(){var t=this;window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}).then((function(e){var n=e.find((function(t){return"eth_accounts"===t.parentCapability})),r=((null==n?void 0:n.caveats)||[]).find((function(t){return"exposedAccounts"===t.name})),o=(null==r?void 0:r.value)||[];o.length&&t.setEthAddress(o[0])}))},disconnectEth:function(){this.setEthAddress("")},setEthAddress:function(t){this.ethAddress=t,this.$emit("update:address",t)},sendTransaction:function(t){return Object(_.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_chainId"});case 2:if(n=e.sent,Number(n)===w.l){e.next=5;break}throw new Error("Invalid chain selected. Expected ".concat(w.l,", given ").concat(Number(n),"."));case 5:return r=new C.a(window.ethereum),e.abrupt("return",new Promise((function(e,n){r.sendTransaction(t).on("transactionHash",e).on("error",n)})));case 7:case"end":return e.stop()}}),e)})))()}}},$=Object(h.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isAvailable?n("button",{staticClass:"button",on:{click:t.connectEth}},[n("img",{staticClass:"button__icon",attrs:{alt:"",role:"presentation",src:t.BASE_URL_PREFIX+"/img/icon-metamask.svg"}}),t._v(" "),n("span",[t._v("Metamask")])]):t._e()}),[],!1,null,null,null).exports,T=n(0),k=(n(9),n(24),n(11),n(49),n(23),n(39),n(60),n(35),n(68),n(687)),S=n(641);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(T.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={HUB_DEPOSIT_TX_PURPOSE:w.v,components:{Modal:S.a},props:{hubCoinList:{type:Array,required:!0},priceList:{type:Array,required:!0},classCustom:{type:String,default:""}},data:function(){return{ethAddress:"",confirmData:{tx:null,info:null,computed:null},isConfirmModalVisible:!1}},computed:{isConnected:function(){return!!this.ethAddress},ethGasPriceGwei:function(){var t,e=this.priceList.find((function(t){return"eth/gas"===t.name}));return t=e?e.value/10:100,w.D===w.A?t:10*t}},mounted:function(){"minter"===window.localStorage.getItem("hub-deposit-connected-account")&&this.connectEth()},methods:{pretty:c.r,prettyExact:c.s,connectEth:function(){this.setEthAddress(this.$store.getters.address.replace("Mx","0x"))},disconnectEth:function(){this.cancelConfirmation(),this.setEthAddress("")},setEthAddress:function(t){this.ethAddress=t,this.$emit("update:address",t)},sendTransaction:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.nonce)&&0!==r){n.next=5;break}n.t0=r,n.next=8;break;case 5:return n.next=7,k.b.getTransactionCount(e.ethAddress,"pending");case 7:n.t0=n.sent;case 8:return r=n.t0,n.next=11,e.estimateTxGas(t);case 11:return o=n.sent,o=Math.ceil(1.5*o),c=(e.ethGasPriceGwei||1).toString(),l={to:t.to,value:t.value||"0x00",data:t.data,nonce:r,gasPrice:k.i.toWei(c,"gwei"),gas:o,chainId:w.l},n.next=17,e.showConfirmation(l);case 17:return console.log("send",l),n.next=20,k.b.accounts.signTransaction(l,e.$store.getters.privateKey);case 20:return d=n.sent,f=d.rawTransaction,n.abrupt("return",new Promise((function(t,e){k.b.sendSignedTransaction(f).on("transactionHash",t).on("error",e)})));case 23:case"end":return n.stop()}}),n)})))()},estimateTxGas:function(t){var e=t.to,n=t.value,data=t.data,r={from:this.ethAddress,to:e,value:n||"0x00",data:data};return k.b.estimateGas(r)},showConfirmation:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.cancelConfirmation(),e.confirmData.tx=t,n.next=4,Object(k.e)(E(E({},t),{},{input:t.data}),e.hubCoinList);case 4:return e.confirmData.info=n.sent,e.confirmData.computed={gasPriceGwei:k.i.fromWei(t.gasPrice,"gwei"),fee:t.gas*k.i.fromWei(t.gasPrice)},e.isConfirmModalVisible=!0,n.abrupt("return",new Promise((function(t,e){o={resolve:t,reject:e}})));case 8:case"end":return n.stop()}}),n)})))()},acceptConfirmation:function(){var t;"function"==typeof(null===(t=o)||void 0===t?void 0:t.resolve)&&o.resolve(),o=null,this.isConfirmModalVisible=!1},cancelConfirmation:function(){var t;"function"==typeof(null===(t=o)||void 0===t?void 0:t.reject)&&o.reject(new Error("Canceled by user")),o=null,this.isConfirmModalVisible=!1}}},L={components:{HubDepositAccountWalletConnect:v,HubDepositAccountMetamask:$,HubDepositAccountMinter:Object(h.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"button",class:t.classCustom,on:{click:t.connectEth}},[n("span",[t._v("Console seed phrase")])]),t._v(" "),n("portal",{attrs:{to:"account-minter-confirm-modal"}},[n("Modal",{attrs:{isOpen:t.isConfirmModalVisible},on:{"update:isOpen":function(e){t.isConfirmModalVisible=e},"update:is-open":function(e){t.isConfirmModalVisible=e}}},[t.confirmData.tx&&t.confirmData.computed?n("div",{staticClass:"panel u-text-left"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                        Sign transaction\n                    ")])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                                "+t._s(t.ethAddress)+"\n                            ")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("From your address")])])]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t.confirmData.info.type===t.$options.HUB_DEPOSIT_TX_PURPOSE.SEND?[t._v("Send to bridge")]:[t._v(t._s(t.confirmData.info.type))]],2),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Method")])])]),t._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                                "+t._s(t.prettyExact(t.confirmData.info.amount))+" "+t._s(t.confirmData.info.tokenName)+"\n                            ")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Amount")])])])]),t._v(" "),n("div",{staticClass:"panel__section u-text-left"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                                    "+t._s(t.pretty(t.confirmData.computed.gasPriceGwei))+" gwei\n                                ")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Gas price")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                                    "+t._s(t.confirmData.tx.gas)+"\n                                ")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Gas limit")])])]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v("\n                                    "+t._s(t.pretty(t.confirmData.computed.fee))+" ETH\n                                ")]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("Fee")])])])])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--main button--full",attrs:{type:"button","data-focus-on-open":""},on:{click:function(e){return t.acceptConfirmation()}}},[n("span",{staticClass:"button__content"},[t._v(t._s(t.$td("Confirm","form.submit-confirm-button")))])]),t._v(" "),n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){return t.cancelConfirmation()}}},[t._v("\n                        "+t._s(t.$td("Cancel","form.submit-cancel-button"))+"\n                    ")])])]):t._e()])],1)],1)}),[],!1,null,null,null).exports},props:{hubCoinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},data:function(){return{selectedAccount:null,selectedAccountType:"",ethAddress:"",isConnectionStartedAndModalClosed:!1}},computed:{isConnected:function(){return!!this.ethAddress}},methods:{getEtherscanAddressUrl:c.e,disconnectEth:function(){this.selectedAccount.disconnectEth(),this.selectedAccount=null,this.selectedAccountType="",window.localStorage.removeItem("hub-deposit-connected-account")},setEthAddress:function(t,e){this.selectedAccountType&&this.selectedAccountType!==e&&t||(this.ethAddress=t,this.$emit("update:address",t),t?("walletconnect"===e&&(this.selectedAccount=this.$refs.ethAccountWalletconnect),"metamask"===e&&(this.selectedAccount=this.$refs.ethAccountMetamask),"minter"===e&&(this.selectedAccount=this.$refs.ethAccountMinter),this.selectedAccountType=e,window.localStorage.setItem("hub-deposit-connected-account",e)):(this.selectedAccountType="",this.selectedAccount=null,window.localStorage.removeItem("hub-deposit-connected-account")))},sendTransaction:function(t){return this.selectedAccount.sendTransaction(t)}}},M=Object(h.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel__section panel__section--wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isConnected,expression:"!isConnected"}],staticClass:"panel__section"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell"},[t._v("\n                Connect your Ethereum wallet\n            ")]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"button-group"},[n("HubDepositAccountWalletConnect",{ref:"ethAccountWalletconnect",staticClass:"button--ghost-main",on:{"update:address":function(e){return t.setEthAddress(e,"walletconnect")}}}),t._v(" "),n("HubDepositAccountMetamask",{ref:"ethAccountMetamask",staticClass:"button--ghost-main",on:{"update:address":function(e){return t.setEthAddress(e,"metamask")}}}),t._v(" "),n("HubDepositAccountMinter",{ref:"ethAccountMinter",attrs:{"class-custom":"button--ghost-main","hub-coin-list":t.hubCoinList,"price-list":t.priceList},on:{"update:address":function(e){return t.setEthAddress(e,"minter")}}})],1)])])]),t._v(" "),t.isConnected?n("div",{staticClass:"panel__section panel__section--tint"},[t._v("\n        Wallet connected with\n        "),"walletconnect"===t.selectedAccountType?[t._v("WalletConnect")]:t._e(),t._v(" "),"metamask"===t.selectedAccountType?[t._v("Metamask")]:t._e(),t._v(" "),"minter"===t.selectedAccountType?[t._v("Console seed phrase")]:t._e(),t._v(" "),n("br"),t._v(" "),n("a",{staticClass:"link--default",attrs:{href:t.getEtherscanAddressUrl(t.ethAddress),target:"_blank"}},[t._v(t._s(t.ethAddress))]),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"button button--ghost u-mt-10",on:{click:t.disconnectEth}},[t._v("Change wallet")])],2):t._e()])}),[],!1,null,null,null);e.a=M.exports},1156:function(t,e,n){"use strict";n(112);var r=n(687),o=n(312),c=n(102),l=n(628),d=n(6),f={NOT_FOUND:"not_found",LOADING:"loading",PENDING:"pending",RECEIPT:"receipt",CONFIRMED:"confirmed",CONFIRMED_NOT_FINAL:"confirmed_not_final",FAILED:"failed"},m={TX_STATUS:f,HUB_TRANSFER_STATUS:d.y,components:{Loader:l.a},props:{hash:{type:String,required:!0},coinList:{type:Array,default:function(){return[]}}},fetch:function(){var t=this;this.isLoading=!0,Object(r.d)(),this.txWatcher=Object(r.g)(this.hash).once("tx",(function(e){t.tx=e,t.tokenInfoPromise=Object(r.e)(e,t.coinList).then((function(e){t.tokenInfo=e,t.isLoading=!1})).catch((function(t){console.log(t)}))})).once("confirmation",(function(e){t.tx=e})).then((function(e){return t.tx=e,e})).catch((function(t){"unsubscribed"!==t.message&&console.log(t)})),this.txWatcher.then((function(e){t.tokenInfoPromise.then((function(){t.tokenInfo.type===d.v.SEND&&(t.transferWatcher=Object(o.e)(e.hash).on("update",(function(e){t.transfer=e})).catch((function(t){"unsubscribed"!==t.message&&console.log(t)})))}))}))},data:function(){return{isLoading:!0,tx:null,tokenInfo:null,tokenInfoPromise:null,txWatcher:null,transfer:null,transferWatcher:null}},computed:{timeDistance:function(){var t;return Object(c.n)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},time:function(){var t;return Object(c.o)(null===(t=this.tx)||void 0===t?void 0:t.timestamp)},txStatus:function(){var t,e;if(!this.tx)return f.NOT_FOUND;if(this.tx.blockHash&&!this.tx.confirmations)return f.LOADING;if(!this.tx.blockHash)return f.PENDING;if(!1===this.tx.status)return f.FAILED;var n=(null===(t=this.tokenInfo)||void 0===t?void 0:t.type)===d.v.SEND?r.a:1;return this.tx.confirmations>=n?(null===(e=this.tokenInfo)||void 0===e?void 0:e.type)===d.v.SEND?f.CONFIRMED_NOT_FINAL:f.CONFIRMED:f.RECEIPT},status:function(){var t;return null!==(t=this.transfer)&&void 0!==t&&t.status&&this.transfer.status!==d.y.not_found?this.transfer.status:this.txStatus},isFinished:function(){var t;return Object(c.q)(null===(t=this.transfer)||void 0===t?void 0:t.status)&&this.txStatus===f.CONFIRMED_NOT_FINAL||this.txStatus===f.CONFIRMED||this.txStatus===f.FAILED||this.txStatus===f.NOT_FOUND},symbol:function(){var t=this;if(!this.tokenInfo)return"";var e=this.coinList.find((function(e){return e.ethAddr===t.tokenInfo.tokenContract}));return e?e.symbol:""},isInfiniteUnlock:function(){return!!this.tokenInfo&&(this.tokenInfo.type===d.v.UNLOCK&&this.tokenInfo.amount>Math.pow(10,18))}},destroyed:function(){var t,e;"function"==typeof(null===(t=this.txWatcher)||void 0===t?void 0:t.unsubscribe)&&this.txWatcher.unsubscribe(),"function"==typeof(null===(e=this.transferWatcher)||void 0===e?void 0:e.unsubscribe)&&this.transferWatcher.unsubscribe()},methods:{pretty:c.r,getEtherscanTxUrl:c.f,getExplorerTxUrl:c.k,formatHash:function(t){return Object(c.x)(t,13)}}},h=n(57),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("div",{staticClass:"preview__transaction"},[n("div",{staticClass:"hub__preview-transaction-row u-text-overflow"},[n("div",[n("a",{staticClass:"link--main",attrs:{href:t.getEtherscanTxUrl(t.hash),target:"_blank"}},[t._v(t._s(t.formatHash(t.hash)))])]),t._v(" "),t.tokenInfo?n("div",{staticClass:"u-fw-700"},[t.isInfiniteUnlock?[t._v("Infinite unlock "+t._s(t.symbol))]:[t._v(t._s(t.tokenInfo.type)+" "+t._s(t.pretty(t.tokenInfo.amount))+" "+t._s(t.symbol))]],2):t._e()]),t._v(" "),n("div",{staticClass:"hub__preview-transaction-row hub__preview-transaction-meta"},[n("div",[t.tx.timestamp?[t._v(t._s(t.timeDistance)+" ago ("+t._s(t.time)+")")]:t._e()],2),t._v(" "),n("div",[t.status===t.$options.TX_STATUS.LOADING?[t._v("Loading")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.PENDING?[t._v("Pending")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.RECEIPT?[t._v("Received, waiting confirmations")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED?[t._v("Confirmed")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.CONFIRMED_NOT_FINAL?[t._v("Confirmed, waiting for bridge")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.deposit_to_hub_received?[t._v("Bridge collecting batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_created?[t._v("Bridge created batch")]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.batch_executed?[t._v("\n                Success\n                "),n("a",{staticClass:"link--main",attrs:{href:t.getExplorerTxUrl(t.transfer.outTxHash),target:"_blank"}},[t._v(t._s(t.formatHash(t.transfer.outTxHash)))])]:t._e(),t._v(" "),t.status===t.$options.HUB_TRANSFER_STATUS.refund?[t._v("Refunded")]:t._e(),t._v(" "),t.status===t.$options.TX_STATUS.FAILED?n("span",{staticClass:"u-text-error"},[t._v("Failed")]):t._e(),t._v(" "),n("Loader",{staticClass:"hub__preview-loader",attrs:{"is-loading":!t.isFinished}})],2)])])}),[],!1,null,null,null);e.a=component.exports},1169:function(t,e,n){"use strict";n.r(e);var r=n(19),o=(n(2),n(32),n(37),n(36),n(58),n(643)),c=(n(49),n(23),n(39),n(60),n(35),n(68),n(0)),l=(n(52),n(112),n(38),n(11),n(223)),d=n(102),f=n(628);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function v(t,e,n){var r=t.find((function(t){return t.name===e})),o=r?r.value:"0";return n?o:new l.a(o).div(Math.pow(10,10)).toString()}var _,y,C={components:{Loader:f.a},props:{isLoading:{type:Boolean,default:!1},coinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},data:function(){return{}},computed:{coinListMapped:function(){var t=this;return this.coinList.map((function(e){return h(h({},e),{},{price:v(t.priceList,"minter/"+e.minterId)})}))},ethereumPrice:function(){return v(this.priceList,"eth/0")},ethereumGas:function(){return v(this.priceList,"eth/gas",!0)/10}},methods:{pretty:d.r,getExplorerCoinUrl:d.i,getEtherscanAddressUrl:d.e}},w=n(57),x=Object(w.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"panel"},[t.isLoading?n("div",{staticClass:"panel__content panel__section u-text-center"},[n("Loader",{attrs:{isLoading:!0}})],1):[t.coinList.length?n("div",{staticClass:"table-wrap"},[n("table",[n("thead",[n("tr",{staticClass:"u-text-nowrap"},[n("th",{attrs:{width:"30%"}},[n("span",{staticClass:"u-hidden-small-down"},[t._v(t._s(t.$td("Available tokens","hub.coin-table-name")))]),t._v(" "),n("span",{staticClass:"u-hidden-small-up"},[t._v(t._s(t.$td("Tokens","hub.coin-table-name-mobile")))])]),t._v(" "),n("th",{attrs:{width:"30%"}},[t._v(t._s(t.$td("Contract","hub.coin-table-contract")))]),t._v(" "),n("th",{attrs:{width:"25%"}},[t._v(t._s(t.$td("Price","hub.coin-table-price")))]),t._v(" "),n("th",{attrs:{width:"15%"}},[n("span",{staticClass:"u-hidden-small-down"},[t._v(t._s(t.$td("Hub fee","hub.coin-table-fee")))]),t._v(" "),n("span",{staticClass:"u-hidden-small-up"},[t._v(t._s(t.$td("Fee","hub.coin-table-fee-mobile")))])])])]),t._v(" "),n("tbody",t._l(t.coinListMapped,(function(e){return n("tr",{key:e.minterId,staticClass:"u-text-nowrap"},[n("td",[n("a",{staticClass:"link--default",attrs:{href:t.getExplorerCoinUrl(e.symbol),target:"_blank",rel:"noopener"}},[t._v(t._s(e.symbol))])]),t._v(" "),n("td",[n("a",{staticClass:"link--default",attrs:{href:t.getEtherscanAddressUrl(e.ethAddr),target:"_blank",rel:"noopener"}},[t._v(t._s(e.denom.toUpperCase()))])]),t._v(" "),n("td",[t._v("\n                            $"+t._s(t.pretty(e.price))+"\n                        ")]),t._v(" "),n("td",[t._v("\n                            "+t._s(t.pretty(100*e.customCommission))+"%\n                        ")])])})),0)])]):n("div",{staticClass:"panel__content panel__section u-text-center"},[t._v("No Coins")]),t._v(" "),n("dl",{staticClass:"dl--table"},[n("dt",[t._v(t._s(t.$td("Ethereum price:","hub.ethereum-price")))]),t._v(" "),n("dd",[t._v("$"+t._s(t.pretty(t.ethereumPrice)))]),t._v(" "),n("dt",[t._v(t._s(t.$td("Gas price:","hub.ethereum-gase")))]),t._v(" "),n("dd",[t._v(t._s(t.ethereumGas)+" gwei")])])]],2)}),[],!1,null,null,null).exports,$=n(16),T=(n(81),n(67),n(626)),k=n(627),S=n.n(k),A=n(657),E=n.n(A),O=n(631),L=n.n(O),M=n(637),j=n(5),F=n(90),I=n(633),P=n(312),R=n(6),N=n(625),V=n(306),D=n(645),U=n(655),W=n(634),B=n(641),H="fast",X={SPEED_MIN:"min",SPEED_FAST:H,components:{FieldQr:D.a,FieldUseMax:U.a,FieldCoin:W.a,Loader:f.a,Modal:B.a},directives:{autosize:M.a,checkEmpty:N.a},mixins:[T.validationMixin],props:{hubCoinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},fetch:function(){return this.getEthFee()},data:function(){return{ethFee:{min:0,fast:0},form:{coin:"",amount:"",address:"",speed:H},isFormSending:!1,serverSuccess:null,serverError:"",serverWarning:"",isConfirmModalVisible:!1,isSuccessModalVisible:!1}},computed:{coinId:function(){var t=this,e=this.hubCoinList.find((function(e){return e.symbol===t.form.coin}));return e?e.minterId:void 0},hubFeeRate:function(){var t=this,e=this.hubCoinList.find((function(e){return e.symbol===t.form.coin}));return(null==e?void 0:e.customCommission)||.01},coinPrice:function(){var t=this,e=this.priceList.find((function(e){return e.name==="minter/"+t.coinId}));return e?e.value:"0"},coinFee:function(){if("0"===this.coinPrice)return 0;var t="min"===this.form.speed?this.ethFee.min:this.ethFee.fast;return new l.a(t).div(this.coinPrice).toString()},hubFee:function(){var t=new l.a(this.coinFee).plus(this.form.amount||0),e=new l.a(this.hubFeeRate).div(new l.a(1).minus(this.hubFeeRate));return t.times(e).toString()},totalFee:function(){return new l.a(this.coinFee).plus(this.hubFee).toString()},amountToSpend:function(){return new l.a(this.totalFee).plus(this.form.amount||0).toString()},maxAmount:function(){var t=this,e=this.$store.getters.balance.find((function(e){return e.coin.symbol===t.form.coin}));if(e){var n=new l.a(e.amount).times(this.hubFeeRate),r=new l.a(e.amount).minus(n).minus(this.coinFee);return r.lt(0)?0:r.toString()}},suggestionList:function(){var t=this;return this.$store.getters.balance.filter((function(e){return t.hubCoinList.find((function(t){return Number(t.minterId)===e.coin.id}))}))}},validations:function(){var t=this;return{form:{address:{required:S.a,validAddress:function(address){return/^0x[0-9a-fA-F]{40}$/.test(address)}},coin:{required:S.a,minLength:L()(3),supported:function(){return!!t.coinId}},amount:{required:S.a,minValue:function(t){return t>0},maxValue:E()(this.maxAmount||0)}}}},mounted:function(){var t=this;_=setInterval((function(){t.getEthFee()}),3e4)},destroyed:function(){clearInterval(_)},methods:{pretty:d.r,prettyPrecise:d.u,prettyRound:d.w,getExplorerTxUrl:d.k,getEthFee:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.checkWarning;return Object(P.c)().then((function(e){n&&new l.a(e.fast).gt(t.ethFee.fast)&&(t.serverWarning=!0),t.ethFee=e}))},submitConfirm:function(){var t=this;if(!this.isFormSending){if(!this.$v.$invalid)return this.serverError="",this.serverWarning="",this.serverSuccess=null,this.isFormSending=!0,this.getEthFee({checkWarning:!0}).then((function(){t.isFormSending=!1,t.serverWarning||(t.isConfirmModalVisible=!0)})).catch((function(e){console.log(e),t.isFormSending=!1,t.serverError=Object(V.a)(e)}));this.$v.$touch()}},submit:function(){var t=this;return Object($.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isConfirmModalVisible=!1,!t.$v.$invalid){e.next=4;break}return t.$v.$touch(),e.abrupt("return");case 4:return t.serverError="",t.serverWarning="",t.serverSuccess=null,t.isFormSending=!0,e.next=10,t.getEthFee({checkWarning:!0});case 10:if(!t.serverWarning){e.next=13;break}return t.isFormSending=!1,e.abrupt("return");case 13:return n={type:j.a.SEND,data:{to:R.x,value:t.amountToSpend,coin:t.coinId},payload:JSON.stringify({recipient:t.form.address,type:"send_to_eth",fee:Object(F.b)(t.coinFee)})},e.abrupt("return",Object(I.h)(n,{privateKey:t.$store.getters.privateKey}).then((function(e){t.isFormSending=!1,t.serverSuccess=e,t.isSuccessModalVisible=!0,t.clearForm(),t.$store.commit("hub/saveWithdrawFromGate",e)})).catch((function(e){console.log(e),t.isFormSending=!1,t.serverError=Object(V.a)(e)})));case 15:case"end":return e.stop()}}),e)})))()},clearForm:function(){this.$v.$reset(),this.form.address="",this.form.amount="",this.form.coin=""}}},G=Object(w.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n            "+t._s(t.$td("Withdraw","hub.withdraw-title"))+"\n        ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n            "+t._s(t.$td("Send coins from Minter to Ethereum","hub.withdraw-description"))+"\n        ")])]),t._v(" "),n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submitConfirm.apply(null,arguments)}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("FieldQr",{attrs:{$value:t.$v.form.address,label:t.$td("Withdraw to address","form.hub-withdraw-address")},on:{blur:function(e){return t.$v.form.address.$touch()}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address","string"==typeof e?e.trim():e)},expression:"form.address"}}),t._v(" "),t.$v.form.address.$error?t.$v.form.address.$dirty&&!t.$v.form.address.required?n("span",{staticClass:"form-field__error"},[t._v("Enter Ethereum address")]):t.$v.form.address.$dirty&&!t.$v.form.address.validAddress?n("span",{staticClass:"form-field__error"},[t._v("Invalid Ethereum address")]):t._e():n("span",{staticClass:"form-field__help"},[t._v("Ethereum address starting with 0x…")])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{$value:t.$v.form.coin,label:t.$td("Coin","form.coin"),"coin-list":t.suggestionList,"fallback-to-full-list":!1},model:{value:t.form.coin,callback:function(e){t.$set(t.form,"coin",e)},expression:"form.coin"}}),t._v(" "),t.$v.form.coin.$dirty&&!t.$v.form.coin.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported by Hub bridge","form.hub-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{$value:t.$v.form.amount,label:t.$td("Amount","form.hub-amount"),"max-value":t.maxAmount},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),t.$v.form.amount.$dirty&&!t.$v.form.amount.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):t.$v.form.amount.$dirty&&!t.$v.form.amount.minValue?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))]):t.$v.form.amount.$dirty&&!t.$v.form.amount.maxValue?n("span",{staticClass:"form-field__error"},[t._v("Not enough "+t._s(t.form.coin)+" (max "+t._s(t.pretty(t.maxAmount))+")")]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2 u-hidden-xlarge-down"}),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-disabled":t.$v.$invalid,"is-loading":t.isFormSending}},[n("span",{staticClass:"button__content"},[t._v(t._s(t.$td("Withdraw","hub.withdraw-title")))]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1),t._v(" "),t.serverError?n("div",{staticClass:"form-field__error"},[t._v(t._s(t.serverError))]):t._e(),t._v(" "),t.serverWarning?n("div",{staticClass:"form-field__help"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" Ethereum fee has updated")]):t._e()])])]),t._v(" "),n("div",{staticClass:"panel__section panel__section--tint"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.amountToSpend))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Total spend","form.hub-withdraw-estimate")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2 u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.coinFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Ethereum fee","form.hub-withdraw-eth-fee")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--1-2 u-cell--medium--1-3"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.hubFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("\n                        "+t._s(t.$td("Bridge fee","form.hub-withdraw-hub-fee"))+"\n                        ("+t._s(t.prettyRound(100*t.hubFeeRate))+"%)\n                    ")])])]),t._v(" "),n("div",{staticClass:"u-cell"},["en"===t.$i18n.locale?[t._m(0),t._v(" "),n("ul",{staticClass:"list-simple"},[n("li",[t._v("Withdraw to the wallet you own first (the one you have a seed phrase to);")]),t._v(" "),n("li",[t._v("Do not withdraw to an exchange because many do not accept deposits from smart contracts and your tokens will be lost;")]),t._v(" "),n("li",[t._v("Pay attention to Ethereum a Minter Hub fees;")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.$td("Minter Hub is","hub.warning-description-2"))+"\n                            "),n("a",{staticClass:"link--default",attrs:{href:"https://github.com/MinterTeam/minter-hub",target:"_blank"}},[t._v(t._s(t.$td("open-source","hub.warning-description-3")))]),t._v(".\n                            "+t._s(t.$td("If needed, you may investigate its code before making use of the features offered on this page.","hub.warning-description-4"))+"\n                        ")])])]:t._e(),t._v(" "),"ru"===t.$i18n.locale?[t._m(1),t._v(" "),t._m(2)]:t._e()],2)])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isConfirmModalVisible},on:{"update:isOpen":function(e){t.isConfirmModalVisible=e},"update:is-open":function(e){t.isConfirmModalVisible=e}}},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                    "+t._s(t.$td("Withdraw","hub.withdraw-title"))+"\n                ")])]),t._v(" "),n("div",{staticClass:"panel__section u-text-left"},[n("div",{staticClass:"u-grid u-grid--vertical-margin"},[n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.form.amount))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("You send","form.wallet-send-confirm-amount")))])])]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.form.address))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("To the address","form.wallet-send-confirm-address")))])])]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.coinFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Ethereum fee","form.hub-withdraw-eth-fee")))])])]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.hubFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("\n                                "+t._s(t.$td("Bridge fee","form.hub-withdraw-hub-fee"))+"\n                                ("+t._s(t.prettyRound(100*t.hubFeeRate))+"%)\n                            ")])])]),t._v(" "),n("div",{staticClass:"u-cell"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.amountToSpend))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Total spend","form.hub-withdraw-estimate")))])])])])]),t._v(" "),n("div",{staticClass:"panel__section"},[n("button",{staticClass:"button button--main button--full",class:{"is-loading":t.isFormSending},attrs:{type:"button","data-focus-on-open":""},on:{click:t.submit}},[n("span",{staticClass:"button__content"},[t._v(t._s(t.$td("Confirm","form.submit-confirm-button")))]),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1),t._v(" "),t.isFormSending?t._e():n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){t.isConfirmModalVisible=!1}}},[t._v("\n                    "+t._s(t.$td("Cancel","form.submit-cancel-button"))+"\n                ")])]),t._v(" "),n("div",{staticClass:"panel__section u-text-left"},["en"===t.$i18n.locale?[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" "),n("strong",[t._v("DO NOT")]),t._v(" withdraw to an exchange because many do not accept deposits from smart contracts and your tokens will be lost.\n                    Withdraw to the wallet you own first (the one you "),n("strong",[t._v("have a seed phrase")]),t._v(" to).\n                ")]:t._e(),t._v(" "),"ru"===t.$i18n.locale?[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" "),n("strong",[t._v("НЕ")]),t._v(" делайте вывод на биржи, так как многие не зачисляют средства из смарт-контрактов. Вы потеряете свои токены.\n                    Выводите на кошелек, которым владеете (от которого у вас "),n("strong",[t._v("есть сид-фраза")]),t._v(").\n                ")]:t._e()],2)])]),t._v(" "),n("Modal",{attrs:{isOpen:t.isSuccessModalVisible},on:{"update:isOpen":function(e){t.isSuccessModalVisible=e},"update:is-open":function(e){t.isSuccessModalVisible=e}}},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                    "+t._s(t.$td("Success!","form.success-title"))+"\n                ")])]),t._v(" "),n("div",{staticClass:"panel__section u-text-left"},[n("strong",[t._v(t._s(t.$td("Tx sent:","form.tx-sent")))]),t._v(" "),t.serverSuccess?n("a",{staticClass:"link--default u-text-break",attrs:{href:t.getExplorerTxUrl(t.serverSuccess.hash),target:"_blank"}},[t._v(t._s(t.serverSuccess.hash))]):t._e()]),t._v(" "),n("div",{staticClass:"panel__section"},[t.serverSuccess?n("a",{staticClass:"button button--main button--full",attrs:{href:t.getExplorerTxUrl(t.serverSuccess.hash),target:"_blank"}},[t._v("\n                    "+t._s(t.$td("View transaction","form.success-view-button"))+"\n                ")]):t._e(),t._v(" "),n("button",{staticClass:"button button--ghost-main button--full",attrs:{type:"button"},on:{click:function(e){t.isSuccessModalVisible=!1}}},[t._v("\n                    "+t._s(t.$td("Close","form.success-close-button"))+"\n                ")])])])])],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"u-mb-05"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" "),n("strong",[t._v("Withdrawal notice")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"u-mb-05"},[n("span",{staticClass:"u-emoji"},[t._v("⚠️")]),t._v(" "),n("strong",[t._v("Внимание")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"list-simple"},[n("li",[t._v("Вывод средств возможен только на ваш персональный адрес;")]),t._v(" "),n("li",[t._v("Не допускается вывод средств на смарт-контракты, адреса бирж или адреса, к которым у вас нет прямого доступа;")]),t._v(" "),n("li",[t._v("Всегда обращайте внимание на комиссии Ethereum и Minter Hub;")]),t._v(" "),n("li",[t._v("Minter Hub имеет открытый "),n("a",{staticClass:"link--default",attrs:{href:"https://github.com/MinterTeam/minter-hub",target:"_blank"}},[t._v("исходный код")]),t._v(", изучите его при необходимости.")])])}],!1,null,null,null).exports,Q=(n(183),n(249),{WITHDRAW_STATUS:R.y,components:{Loader:f.a},fetch:function(){this.$store.dispatch("hub/loadWithdrawList")},data:function(){return{txPollList:{}}},computed:{hasTx:function(){return Object.keys(this.$store.state.hub.minterList).length},withdrawList:function(){return Object.values(this.$store.state.hub.minterList).sort((function(a,b){return new Date(b.timestamp)-new Date(a.timestamp)}))}},watch:{"$store.state.hub.minterList":{handler:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(n){if(!t.txPollList[n]){var r=e[n];Object(d.q)(null==r?void 0:r.status)||(t.txPollList[n]=Object(P.e)(n,r.timestamp).on("update",(function(e){t.$store.commit("hub/updateWithdraw",e)})).then((function(){delete t.txPollList[n]})).catch((function(e){"unsubscribed"!==e.message?console.log(e):delete t.txPollList[n]})))}}))},deep:!0,immediate:!0}},destroyed:function(){Object.values(this.txPollList).forEach((function(t){"function"==typeof t.unsubscribe&&t.unsubscribe()}))},methods:{getTime:d.o,getTimeDistance:d.n,getExplorerTxUrl:d.k,getEtherscanTxUrl:d.f,convertFromPip:F.a,pretty:d.r,formatHash:function(t){return Object(d.x)(t||"",13)},isHubTransferFinished:d.q}}),K=Object(w.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasTx?n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header panel__header-title"},[t._v("Transactions")]),t._v(" "),t._l(t.withdrawList,(function(e){return n("div",{key:e.tx.hash,staticClass:"panel__section preview__transaction"},[n("div",{staticClass:"hub__preview-transaction-row u-text-overflow"},[n("div",[n("a",{staticClass:"link--main",attrs:{href:t.getExplorerTxUrl(e.tx.hash),target:"_blank"}},[t._v(t._s(t.formatHash(e.tx.hash)))])]),t._v(" "),n("div",{staticClass:"u-fw-700"},[t._v(t._s(t.pretty(e.amount))+" "+t._s(e.tx.data.coin.symbol))])]),t._v(" "),n("div",{staticClass:"hub__preview-transaction-row hub__preview-transaction-meta"},[n("div",[t._v(t._s(t.getTimeDistance(e.timestamp||0))+" ago ("+t._s(t.getTime(e.timestamp||0))+")")]),t._v(" "),n("div",[e.status&&e.status!==t.$options.WITHDRAW_STATUS.not_found?t._e():[t._v("Sending to Hub bridge")],t._v(" "),e.status===t.$options.WITHDRAW_STATUS.not_found_long?[t._v("Not found")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.deposit_to_hub_received?[t._v("Bridge collecting batch to Ethereum")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.batch_created?[t._v("Sent to Ethereum, waiting confirmation")]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.batch_executed?[t._v("\n                    Success\n                    "),n("a",{staticClass:"link--main",attrs:{href:t.getEtherscanTxUrl(e.ethTxHash),target:"_blank"}},[t._v(t._s(t.formatHash(e.ethTxHash)))])]:t._e(),t._v(" "),e.status===t.$options.WITHDRAW_STATUS.refund?[t._v("Refunded")]:t._e(),t._v(" "),n("Loader",{staticClass:"hub__preview-loader",attrs:{"is-loading":!t.isHubTransferFinished(e.status)}})],2)])])}))],2):t._e()}),[],!1,null,null,null).exports,z=n(779).a,Y={components:{HubCoinList:x,HubWithdrawForm:G,HubWithdrawTxList:K,HubDepositForm:Object(w.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-wrap"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header"},[n("h1",{staticClass:"panel__header-title"},[t._v("\n                "+t._s(t.$td("Deposit","hub.deposit-title"))+"\n            ")]),t._v(" "),n("p",{staticClass:"panel__header-description"},[t._v("\n                "+t._s(t.$td("Send coins from Ethereum to Minter","hub.deposit-description"))+"\n            ")])]),t._v(" "),t.isConnected?n("form",{staticClass:"panel__section",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("FieldQr",{attrs:{$value:t.$v.form.address,label:t.$td("Deposit to address","form.hub-deposit-address")},on:{blur:function(e){return t.$v.form.address.$touch()}},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address","string"==typeof e?e.trim():e)},expression:"form.address"}}),t._v(" "),t.$v.form.address.$error?t.$v.form.address.$dirty&&!t.$v.form.address.required?n("span",{staticClass:"form-field__error"},[t._v("Enter Minter address")]):t.$v.form.address.$dirty&&!t.$v.form.address.validAddress?n("span",{staticClass:"form-field__error"},[t._v("Invalid Minter address")]):t._e():n("span",{staticClass:"form-field__help"},[t._v("Minter address starting with Mx…")])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldCoin",{attrs:{readonly:t.isFormSending,$value:t.$v.form.coin,label:t.$td("Coin","form.coin"),"coin-list":t.suggestionList,"fallback-to-full-list":!1},model:{value:t.form.coin,callback:function(e){t.$set(t.form,"coin",e)},expression:"form.coin"}}),t._v(" "),t.$v.form.coin.$dirty&&!t.$v.form.coin.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter coin symbol","form.coin-error-required")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.minLength?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Min 3 letters","form.coin-error-min")))]):t.$v.form.coin.$dirty&&!t.$v.form.coin.supported?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Not supported by Hub bridge","form.hub-coin-error-supported")))]):t._e()],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-4 u-cell--small--1-2"},[n("FieldUseMax",{attrs:{readonly:t.isFormSending,$value:t.$v.form.amount,label:t.$td("Amount","form.hub-amount"),"max-value":t.maxAmount},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),t.$v.form.amount.$dirty&&!t.$v.form.amount.required?n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Enter amount","form.amount-error-required")))]):!t.$v.form.amount.$dirty||t.$v.form.amount.validAmount&&t.$v.form.amount.minValue?t.$v.form.amount.$dirty&&!t.$v.form.amount.maxValue?n("span",{staticClass:"form-field__error"},[t._v("Not enough "+t._s(t.form.coin)+" (max "+t._s(t.pretty(t.maxAmount))+")")]):t._e():n("span",{staticClass:"form-field__error"},[t._v(t._s(t.$td("Invalid amount","form.amount-error-invalid")))])],1),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[t.stage===t.$options.TX_WRAP?n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.selectedWrapped)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Wrapped ETH balance","form.hub-deposit-weth-balance")))])]):t._e(),t._v(" "),t.stage===t.$options.TX_APPROVE?n("label",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.isInfiniteUnlock,expression:"form.isInfiniteUnlock"}],staticClass:"form-check__input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.isInfiniteUnlock)?t._i(t.form.isInfiniteUnlock,null)>-1:t.form.isInfiniteUnlock},on:{change:function(e){var n=t.form.isInfiniteUnlock,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t._i(n,null);r.checked?c<0&&t.$set(t.form,"isInfiniteUnlock",n.concat([null])):c>-1&&t.$set(t.form,"isInfiniteUnlock",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(t.form,"isInfiniteUnlock",o)}}}),t._v(" "),n("span",{staticClass:"form-check__label form-check__label--checkbox"},[t._v(t._s(t.$td("Infinite unlock","form.hub-deposit-unlock-infinite")))])]):t._e()]),t._v(" "),n("div",{staticClass:"u-cell u-cell--xlarge--1-2"},[n("button",{staticClass:"button button--main button--full",class:{"is-loading":t.isFormSending,"is-disabled":t.$v.$invalid}},[t.stage===t.$options.TX_TRANSFER?n("span",{staticClass:"button__content"},[t._v("Send")]):t._e(),t._v(" "),t.stage===t.$options.TX_APPROVE?n("span",{staticClass:"button__content"},[t.form.isInfiniteUnlock?[t._v("Infinite unlock")]:[t._v("Unlock "),t.form.coin?[t._v(t._s(t.pretty(t.amountToUnlock))+" "+t._s(t.form.coin))]:t._e()]],2):t._e(),t._v(" "),t.stage===t.$options.TX_WRAP?n("span",{staticClass:"button__content"},[t._v("\n                            Wrap "),t.amountToWrap>0?[t._v(t._s(t.pretty(t.amountToWrap)))]:t._e(),t._v(" ETH\n                        ")],2):t._e(),t._v(" "),n("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1)]),t._v(" "),t.serverError?n("div",{staticClass:"u-cell form__error send__text"},[t._v("\n                    "+t._s(t.serverError)+"\n                ")]):t._e()])]):t._e(),t._v(" "),t.isConnected?n("div",{staticClass:"panel__section panel__section--tint"},[n("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.amountToSpend))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Total spend","form.hub-withdraw-estimate")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.pretty(t.hubFee))+" "+t._s(t.form.coin))]),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v("\n                            "+t._s(t.$td("Bridge fee","form.hub-withdraw-hub-fee"))+"\n                            ("+t._s(t.prettyRound(100*t.hubFeeRate))+"%)\n                        ")])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t._v(t._s(t.prettyPrecise(t.selectedBalance)))]),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Token balance","form.hub-deposit-selected-balance")))])])]),t._v(" "),n("div",{staticClass:"u-cell u-cell--large--1-4 u-cell--small--1-2"},[n("div",{staticClass:"form-field form-field--dashed"},[n("div",{staticClass:"form-field__input is-not-empty"},[t.selectedUnlockedInfinity?[t._v("Infinity")]:[t._v(t._s(t.prettyPrecise(t.selectedUnlocked)))]],2),t._v(" "),n("div",{staticClass:"form-field__label"},[t._v(t._s(t.$td("Token unlocked","form.hub-deposit-selected-unlocked")))])])])])]):t._e(),t._v(" "),n("Account",{ref:"ethAccount",attrs:{"hub-coin-list":t.hubCoinList,"price-list":t.priceList},on:{"update:address":function(e){t.ethAddress=e}}}),t._v(" "),n("portal-target",{attrs:{name:"account-minter-confirm-modal"}})],1),t._v(" "),t.transactionList.length?n("div",{staticClass:"panel"},[n("div",{staticClass:"panel__header panel__header-title"},[t._v("Latest transactions")]),t._v(" "),t._l(t.transactionList,(function(e){return n("TxListItem",{key:e.hash,staticClass:"panel__section",attrs:{hash:e.hash,"coin-list":t.hubCoinList}})}))],2):t._e()])}),[],!1,null,null,null).exports},middleware:function(t){var e=t.app;t.store.commit("SET_SECTION_NAME",e.$td("Deposit and withdraw","common.page-deposit"))},fetch:function(){var t=this;return Promise.all([Object(P.b)(),Object(P.d)()]).then((function(e){var n=Object(r.a)(e,2),o=n[0],c=n[1];t.coinList=o,t.priceList=c}))},head:function(){var title=Object(o.a)(this.$store.state.sectionName,this.$i18n.locale),t=this.$td("","deposit.seo-description"),e="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:t},{hid:"og-description",name:"og:description",content:t},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-wallet").concat(e,".png")}]}},data:function(){return{coinList:[],priceList:[]}},computed:{},mounted:function(){var t=this;y=setInterval((function(){Object(P.d)().then((function(e){t.priceList=e}))}),15e3)},destroyed:function(){clearInterval(y)},methods:{}},Z=Object(w.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"u-section u-container"},[n("HubCoinList",{attrs:{"coin-list":t.coinList,"price-list":t.priceList,"is-loading":t.$fetchState.pending}}),t._v(" "),n("HubWithdrawForm",{attrs:{"hub-coin-list":t.coinList,"price-list":t.priceList}}),t._v(" "),n("HubWithdrawTxList"),t._v(" "),n("HubDepositForm",{attrs:{"hub-coin-list":t.coinList,"price-list":t.priceList}})],1)}),[],!1,null,null,null);e.default=Z.exports},625:function(t,e,n){"use strict";n(58);function r(t){return"SELECT"===t.nodeName.toUpperCase()}function o(t){c(t.target)}function c(t){setTimeout((function(){t.value.length?t.classList.add("is-not-empty"):t.classList.remove("is-not-empty")}),0)}e.a={bind:function(t,e,n){c(t),r(t)?t.addEventListener("change",o):t.addEventListener("input",o),e.value&&t.addEventListener(e.value,o)},componentUpdated:function(t,e){c(t),e.oldValue!==e.value&&t.removeEventListener(e.oldValue,o),e.value&&t.addEventListener(e.value,o)},unbind:function(t,e){r(t)?t.removeEventListener("change",o):t.removeEventListener("input",o),e.value&&t.removeEventListener(e.value,o)}}},628:function(t,e,n){"use strict";var r={props:{isLoading:{type:Boolean,default:!1}}},o=(n(668),n(57)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"}},[n("circle",{staticClass:"loader__path",attrs:{cx:"14",cy:"14",r:"12"}})]):t._e()}),[],!1,null,null,null);e.a=component.exports},633:function(t,e,n){"use strict";n.d(e,"h",(function(){return F})),n.d(e,"g",(function(){return I})),n.d(e,"f",(function(){return P})),n.d(e,"a",(function(){return R})),n.d(e,"c",(function(){return U})),n.d(e,"b",(function(){return W})),n.d(e,"d",(function(){return B})),n.d(e,"i",(function(){return H})),n.d(e,"j",(function(){return X})),n.d(e,"e",(function(){return Q}));n(49),n(23),n(39),n(60),n(35),n(68);var r=n(19),o=n(0),c=(n(67),n(2),n(32),n(37),n(52),n(223)),l=n(97),d=n.n(l),f=n(619),m=n(220),h=n.n(m),v=n(692),_=n(693),y=n(678),C=n(679),w=n(695),x=n(697),$=n(681),T=n(702),k=n(674),S=n(675),A=(n(680),n(682)),E=n(6),O=n(69);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=new v.a({apiType:"gate",baseURL:E.s,chainId:E.h,adapter:Object(f.a)(d.a.defaults.adapter,{enabledByDefault:!1})}),F=Object(_.b)(j),I=Object(y.a)(j),P=Object(C.a)(j),R=Object(_.a)(j),N=new h.a({maxAge:3e4}),V=function(t,e){return t.sellAll?Object(x.a)(j)(t,M({},e)):Object(w.a)(j)(t,M({},e))},D=function(t,e){return Object($.a)(j)(t,M({},e))};function U(t,e){if(!t.valueToSell||!Number(t.valueToSell))return Promise.reject(new Error("Value to sell not specified"));if(t.findRoute&&t.swapFrom!==k.c.BANCOR){var n,o=V(t,e).catch((function(t){n=t})),l=Object(O.k)(t.coinToSell,t.coinToBuy,{sellAmount:t.valueToSell},e).catch((function(t){console.log(t)}));return Promise.all([o,l]).then((function(o){var l=Object(r.a)(o,2),d=l[0],f=l[1];if(n&&!f)throw n;var m=f&&n,h=d&&f&&new c.a(d.will_get).lt(f.amountOut)&&f.coins.length>2;if(m||h){var v=f.coins.map((function(t){return t.id}));return v.pop(),v.shift(),Promise.all([V(M(M({},t),{},{route:v,swapFrom:k.c.POOL}),e),Promise.resolve(f.coins)]).then((function(t){var e=Object(r.a)(t,2),n=e[0],o=e[1];n=M(M({},n),{},{route:o});var l=d&&n&&new c.a(d.will_get).lt(n.will_get);return m||l?n:d}))}return d}))}return V(t,e)}function W(t,e){if(!t.valueToBuy||!Number(t.valueToBuy))return Promise.reject(new Error("Value to buy not specified"));if(t.findRoute&&t.swapFrom!==k.c.BANCOR){var n,o=D(t,e).catch((function(t){n=t})),l=Object(O.k)(t.coinToSell,t.coinToBuy,{buyAmount:t.valueToBuy},e).catch((function(t){console.log(t)}));return Promise.all([o,l]).then((function(o){var l=Object(r.a)(o,2),d=l[0],f=l[1];if(n&&!f)throw n;var m=f&&n,h=d&&f&&new c.a(d.will_pay).gt(f.amountIn)&&f.coins.length>2;if(m||h){var v=f.coins.map((function(t){return t.id}));return v.pop(),v.shift(),Promise.all([D(M(M({},t),{},{route:v,swapFrom:k.c.POOL}),e),Promise.resolve(f.coins)]).then((function(t){var e=Object(r.a)(t,2),n=e[0],o=e[1];n=M(M({},n),{},{route:o});var l=d&&n&&new c.a(d.will_pay).gt(n.will_pay);return m||l?n:d}))}return d}))}return D(t,e)}var B=function(t,e){return Object(T.a)(j)(t,{direct:!1},M(M({},e),{},{cache:N}))},H=(new h.a({maxAge:6e4}),Object(S.b)(j)),X=Object(S.c)(j),G=new h.a({maxAge:36e5}),Q=function(){return Object(A.a)(j)({cache:G})}},634:function(t,e,n){"use strict";var r=n(20),o=n(307),c=(n(39),n(52),n(35),n(183),n(14),n(658)),l=n(625),d=n(102),f=n(6),m=n(650),h=["input"];function v(t,e){return e===f.i.ANY||(e===f.i.ANY_TOKEN?t===f.i.TOKEN||t===f.i.POOL_TOKEN:t===e)}var _={ideFix:null,MAX_ITEM_COUNT:6,components:{VueSimpleSuggest:c.a,InputUppercase:m.a},directives:{checkEmpty:l.a},inheritAttrs:!1,props:{value:{type:String,default:""},$value:{type:Object,required:!0},label:{type:String,required:!0},coinList:{type:Array,default:function(){return[]}},coinType:{type:String,default:f.i.ANY},fallbackToFullList:{type:Boolean,default:!0}},data:function(){return{}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,Object(o.a)(t,h));return e},useSpecifiedCoinList:function(){return!this.fallbackToFullList||this.coinList&&this.coinList.length},currentCoinList:function(){var t=this;return this.useSpecifiedCoinList?this.coinList.filter((function(e){return"object"!==Object(r.a)(e)||v(e.coin.type,t.coinType)})):this.$store.state.explorer.coinList.filter((function(e){return v(e.type,t.coinType)})).map((function(t){return t.symbol}))},maxSuggestions:function(){return this.useSpecifiedCoinList?100:6},verifiedMap:function(){var map={};return this.$store.state.explorer.coinList.forEach((function(t){t.verified&&(map[t.symbol]=!0)})),map}},watch:{currentCoinList:function(){var t=this.$refs.vss;t.canSend?t.research():t.getSuggestions(t.text).then((function(e){t.$set(t,"suggestions",e)}))}},methods:{getCoinIconUrl:function(t){return this.$store.getters["explorer/getCoinIcon"](t)},suggestionOrder:function(t){return t?this.currentCoinList.slice(0).sort((function(a,b){return a===t?-1:b===t?1:0})):this.currentCoinList},suggestionFilter:function(t,e){return!e||0===this.getSuggestionCoin(t).indexOf(e)},handleSuggestionClick:function(t,e){e.preventDefault()},getSuggestionCoin:function(t){var e;return(null===(e=t.coin)||void 0===e?void 0:e.symbol)||t},getSuggestionAmount:function(t){var e=t.value||t.amount;return e?"(".concat(Object(d.r)(e),")"):""},getIsVerified:function(t){var symbol=this.getSuggestionCoin(t);return this.verifiedMap[symbol]}}},y=n(57),component=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error}},[n("VueSimpleSuggest",{ref:"vss",attrs:{value:t.value,list:t.suggestionOrder,"max-suggestions":t.maxSuggestions,"min-length":0,"filter-by-query":!0,filter:t.suggestionFilter,"display-attribute":"coin.symbol","value-attribute":"coin.symbol",destyled:!0,controls:{showList:[38,40]}},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)},"suggestion-click":t.handleSuggestionClick},scopedSlots:t._u([{key:"suggestion-item",fn:function(e){var r=e.suggestion;return n("div",{},[n("img",{staticClass:"suggestion__coin-icon",attrs:{src:t.getCoinIconUrl(t.getSuggestionCoin(r)),width:"20",height:"20",alt:"",role:"presentation"}}),t._v(" "),n("span",{staticClass:"suggestion__coin-symbol"},[t._v(t._s(t.getSuggestionCoin(r)))]),t._v(" "),t.getIsVerified(r)?n("img",{staticClass:"suggestion__coin-verified",attrs:{src:t.BASE_URL_PREFIX+"/img/icon-verified.svg",alt:"Verified",width:"12",height:"12"}}):t._e(),t._v(" "),t.getSuggestionAmount(r)?n("span",[t._v(t._s(t.getSuggestionAmount(r)))]):t._e()])}}])},[n("InputUppercase",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",value:t.value}},"InputUppercase",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)],1)}),[],!1,null,null,null);e.a=component.exports},641:function(t,e,n){"use strict";n(58);var r={props:{isOpen:{type:Boolean,default:!1},hideCloseButton:{type:Boolean,default:!1},modalClass:{type:String,default:""},modalContainerClass:{type:String,default:""},keepMarkup:{type:Boolean,default:!1}},data:function(){return{elFocusedBeforeOpen:null}},watch:{isOpen:function(t){var e=this;t?(this.elFocusedBeforeOpen=document.activeElement,setTimeout((function(){if("function"==typeof e.$el.querySelector){var t=e.$el.querySelector("[data-focus-on-open]");t&&t.focus()}}),0)):setTimeout((function(){e.elFocusedBeforeOpen&&setTimeout((function(){e.elFocusedBeforeOpen.focus(),e.elFocusedBeforeOpen=null}),0)}),0)}},methods:{closeModal:function(){this.$emit("update:isOpen",!1),this.$emit("modal-close")},handleModalClick:function(t){this.hideCloseButton||this.$refs.modalContainer&&t.target!==this.$refs.modalContainer&&!this.$refs.modalContainer.contains(t.target)&&this.closeModal()},handleModalKeydown:function(t){this.hideCloseButton||"Escape"!==t.code&&27!==t.keyCode||(t.preventDefault(),this.closeModal())}}},o=n(57),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"v-transition-modal"}},[t.isOpen||t.keepMarkup?n("div",{staticClass:"modal-wrap"},[n("transition",{attrs:{name:"v-transition-modal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||!t.keepMarkup,expression:"isOpen || !keepMarkup"}],staticClass:"modal u-container u-container--wide",class:t.modalClass,attrs:{tabindex:"-1",role:"dialog"},on:{click:t.handleModalClick,keydown:t.handleModalKeydown}},[t.hideCloseButton?t._e():n("button",{staticClass:"modal__close u-semantic-button link--opacity",attrs:{type:"button"}},[n("span",{staticClass:"modal__close-icon"},[t._v("Close")])]),t._v(" "),n("div",{staticClass:"modal__wrap"},[n("div",{ref:"modalContainer",staticClass:"modal__container",class:t.modalContainerClass},[t._t("default")],2)])])])],1):t._e()])}),[],!1,null,null,null);e.a=component.exports},643:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(6);function o(text,t){var e="ru"===t?"Консоль":"Console";return text?r.e+e+". "+text+r.d:r.e+e+r.d}},645:function(t,e,n){"use strict";n(67);var r=n(658),o=n(625),c=n(683),l=n(684),d=n(628),f=n(641);c.a.WORKER_PATH=l.a;var m={components:{Loader:d.a,Modal:f.a},props:{qrVisible:{type:Boolean,default:!1}},data:function(){return{qrScanner:null,cameraError:!1,isModalVisible:!1,isPlaying:!1}},mounted:function(){var t=this;c.a.hasCamera().then((function(){t.$emit("update:qrVisible",!0),t.qrScanner=new c.a(t.$refs.qrVideo,(function(e){t.stopScanQr(),t.isModalVisible=!1,t.$emit("qr-scanned",e)}))})).catch((function(){t.$emit("update:qrVisible",!1)}))},destroyed:function(){this.qrScanner&&this.qrScanner.destroy()},methods:{scanQr:function(){var t=this;this.isModalVisible=!0,this.$refs.qrVideo.addEventListener("canplay",this.handlePlayStart),this.qrScanner.start().then((function(){t.cameraError=!1})).catch((function(){t.cameraError=!0}))},stopScanQr:function(){this.qrScanner.stop(),this.isPlaying=!1,window.removeEventListener("resize",this.repositionOverlay)},handlePlayStart:function(){this.repositionOverlay(),this.isPlaying=!0,window.addEventListener("resize",this.repositionOverlay),this.$refs.qrVideo.removeEventListener("canplay",this.handlePlayStart)},repositionOverlay:function(){var t=this;requestAnimationFrame((function(){if(t.$refs.qrVideo){var e=t.$refs.qrVideo.offsetHeight,n=t.$refs.qrVideo.offsetWidth,r=Math.min(e,n);if(0!==r){var o=Math.ceil(2/3*r),c=t.$refs.overlay;c.style.width=o+"px",c.style.height=o+"px",c.style.top=(e-o)/2+"px",c.style.left=(n-o)/2+"px"}}}))}}},h=n(57),v=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.qrScanner,expression:"qrScanner"}],on:{click:function(t){t.preventDefault()}}},[n("button",{staticClass:"form-field__icon u-semantic-button link--opacity",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.scanQr.apply(null,arguments)}}},[n("img",{attrs:{src:t.BASE_URL_PREFIX+"/img/icon-qr.svg",alt:"Scan QR Code",width:"24",height:"24"}})]),t._v(" "),n("Modal",{staticClass:"qr-scan__modal",attrs:{"modal-container-class":"qr-scan__modal-container",isOpen:t.isModalVisible,keepMarkup:!0},on:{"update:isOpen":function(e){t.isModalVisible=e},"update:is-open":function(e){t.isModalVisible=e},"modal-close":t.stopScanQr}},[n("div",{staticClass:"qr-scan__wrap"},[n("div",{staticClass:"qr-scan__notice"},[n("Loader",{attrs:{isLoading:!0}}),t._v(" "),t.cameraError?n("div",[t._v("Allow camera access")]):t._e()],1),t._v(" "),n("video",{ref:"qrVideo",staticClass:"qr-scan__video",attrs:{autoplay:"",playsinline:"",muted:""},domProps:{muted:!0}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],ref:"overlay",staticClass:"qr-scan__overlay"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 238 238"}},[n("path",{attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M31.3 2H10a8 8 0 0 0-8 8v21.3M206.8 2H228a8 8 0 0 1 8 8v21.3m0 175.4V228a8 8 0 0 1-8 8h-21.3m-175.4 0H10a8 8 0 0 1-8-8v-21.3"}})])])])])],1)}),[],!1,null,null,null).exports,_=n(647),y={ideFix:null,MAX_ITEM_COUNT:5,components:{VueSimpleSuggest:r.a,QrScan:v,Loader:d.a,InputMaskedInteger:_.a},directives:{checkEmpty:o.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},isInteger:{type:Boolean,default:!1},suggestionList:{type:Array,default:function(){return[]}},suggestionFilter:{type:Function,default:void 0},suggestionContent:{type:Function,default:void 0},suggestionMinInputLength:{type:Number,default:1}},data:function(){return{hasCamera:!1}},methods:{handleQrScanned:function(t){this.$emit("input",t),this.$value.$touch()},handleSuggestionClick:function(t,e){e.preventDefault()}}},C=Object(h.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field form-field--qr",class:{"is-error":t.$value.$error,"form-field--with-icon":t.hasCamera}},[t.suggestionList&&t.suggestionList.length?n("VueSimpleSuggest",t._b({attrs:{value:t.value,list:t.suggestionList.slice(0),"max-suggestions":t.$options.MAX_ITEM_COUNT,"min-length":t.suggestionMinInputLength,"filter-by-query":!0,filter:t.suggestionFilter,destyled:!0,controls:{showList:[38,40]},"value-attribute":"value","display-attribute":"value"},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)},"suggestion-click":t.handleSuggestionClick},scopedSlots:t._u([t.suggestionContent?{key:"suggestion-item",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(t.suggestionContent(e))}})]}}:null],null,!0)},"VueSimpleSuggest",t.$attrs,!1),[n("input",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.value}},"input",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])]):[t.isInteger?n("InputMaskedInteger",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}}},"InputMaskedInteger",t.$attrs,!1)):n("input",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",autocapitalize:"off",spellcheck:"false"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}}},"input",t.$attrs,!1)),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],t._v(" "),n("Loader",{staticClass:"form-field__icon form-field__icon--loader form-field__icon--second",attrs:{isLoading:t.$value.$pending}}),t._v(" "),n("QrScan",{attrs:{qrVisible:t.hasCamera},on:{"qr-scanned":t.handleQrScanned,"update:qrVisible":function(e){t.hasCamera=e},"update:qr-visible":function(e){t.hasCamera=e}}})],2)}),[],!1,null,null,null);e.a=C.exports},646:function(t,e,n){"use strict";var r=n(307),o=(n(67),n(660),n(663)),c=["input"],l={ideFix:null,imaskAmount:{mask:Number,scale:18,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[","]},directives:{imask:o.a},props:{value:{type:[String,Number],default:""}},data:function(){return{maskedValue:""}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,Object(r.a)(t,c));return e}},watch:{value:function(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted:function(){this.updateMaskState(this.value)},methods:{updateMaskState:function(t){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}},onAcceptInput:function(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},d=n(57),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.$options.imaskAmount,expression:"$options.imaskAmount"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"decimal"},on:{accept:t.onAcceptInput}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},647:function(t,e,n){"use strict";n(67),n(660);var r=n(663),o={ideFix:null,imaskAmount:{mask:Number,scale:0,signed:!1,thousandsSeparator:"",padFractionalZeros:!1,normalizeZeros:!1,radix:".",mapToRadix:[","]},directives:{imask:r.a},props:{value:{type:[String,Number],default:""}},data:function(){return{maskedValue:""}},computed:{inputListeners:function(){var t=Object.assign({},this.$listeners);return delete t.input,t}},watch:{value:function(t){t!==this.maskedValue&&this.updateMaskState(t)}},mounted:function(){this.updateMaskState(this.value)},methods:{updateMaskState:function(t){this.$refs.input.maskRef.typedValue=t;var e=this.$refs.input.maskRef._value.length;this.$refs.input.maskRef._selection={start:e,end:e}},onAcceptInput:function(t){this.maskedValue=t.detail._unmaskedValue,this.$emit("input",t.detail._unmaskedValue)}}},c=n(57),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({directives:[{name:"imask",rawName:"v-imask",value:t.$options.imaskAmount,expression:"$options.imaskAmount"}],ref:"input",attrs:{type:"text",autocapitalize:"off",inputmode:"numeric"},on:{accept:t.onAcceptInput}},t.inputListeners))}),[],!1,null,null,null);e.a=component.exports},650:function(t,e,n){"use strict";var r=n(307),o=["input","blur","focus"],c={props:{value:{type:String,default:""}},computed:{listeners:function(){var t=this.$listeners,e=(t.input,t.blur,t.focus,Object(r.a)(t,o));return e}},mounted:function(){this.updateValue(this.$refs.input.value)},methods:{updateValue:function(t){(t=t.toUpperCase())!==this.value&&this.$emit("input",t)}}},l=n(57),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g({ref:"input",domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},blur:function(e){return t.$emit("blur",e)},focus:function(e){return t.$emit("focus",e)}}},t.listeners))}),[],!1,null,null,null);e.a=component.exports},651:function(t,e,n){},655:function(t,e,n){"use strict";n(67),n(112),n(2),n(11),n(9),n(24);var r=n(223),o=n(437),c=n(625),l=n(102);var d={components:{InputMaskedAmount:n(646).a},directives:{checkEmpty:c.a},inheritAttrs:!1,props:{value:{type:[String,Number],required:!0},$value:{type:Object,required:!0},label:{type:String,required:!0},maxValue:{type:[String,Number],default:void 0},addressBalance:{type:Array,default:function(){return[]}},selectedCoinSymbol:{type:String,default:""},fee:{type:[Object,null],default:null}},data:function(){return{isUseMax:!1}},computed:{maxValueComputed:function(){var t,e,n=this;if(void 0!==this.maxValue)return this.maxValue;var c=this.addressBalance.find((function(t){return t.coin.symbol===n.selectedCoinSymbol}));if(c){if(!function(t,e){var n=Object(o.h)(e);if(!n&&t.symbol===e)return!0;if(n&&t.id===e)return!0;return!1}(c.coin,null===(t=this.fee)||void 0===t?void 0:t.coin))return c.amount;var l=(null===(e=this.fee)||void 0===e?void 0:e.value)||0,d=new r.a(c.amount).minus(l).toString();return d>0?d:"0"}},isMaxValueDefined:function(){return void 0!==this.maxValueComputed&&this.maxValueComputed>0},isMaxValueRounded:function(){return this.isMaxValueDefined&&!new r.a(this.maxValueComputed).eq(Object(l.r)(this.maxValueComputed).replace(/\s/g,""))}},watch:{value:function(t){(t||0===t)&&this.isMaxValueDefined&&new r.a(t).eq(this.maxValueComputed)||(this.isUseMax=!1)},maxValueComputed:function(t){this.isMaxValueDefined&&this.isUseMax&&this.useMax()}},methods:{pretty:l.r,useMax:function(){if(!this.isMaxValueDefined)return!1;this.isUseMax=!0,this.$emit("input",this.maxValueComputed),this.$emit("use-max"),this.$value.$touch()}}},f=n(57),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-field",class:{"is-error":t.$value.$error,"form-field--with-use-max":t.isMaxValueDefined}},[n("InputMaskedAmount",t._b({directives:[{name:"check-empty",rawName:"v-check-empty"}],staticClass:"form-field__input",attrs:{type:"text",inputmode:"decimal",value:t.value},on:{input:function(e){return t.$emit("input",e)},blur:function(e){t.$value.$touch(),t.$emit("blur",e)}}},"InputMaskedAmount",t.$attrs,!1)),t._v(" "),t.isMaxValueDefined?n("button",{staticClass:"form-field__use-max link--main link--opacity u-semantic-button",attrs:{type:"button"},on:{click:t.useMax}},[t._v("Use max")]):t._e(),t._v(" "),t.isMaxValueDefined&&!t.isUseMax?n("span",{staticClass:"form-field__max-available"},[t._v("\n        "+t._s(t.isMaxValueRounded?"≈":"")+t._s(t.pretty(t.maxValueComputed))+"\n    ")]):t._e(),t._v(" "),n("span",{staticClass:"form-field__label"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null);e.a=component.exports},668:function(t,e,n){"use strict";n(651)},687:function(t,e,n){"use strict";n.d(e,"a",(function(){return $})),n.d(e,"i",(function(){return T})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return A})),n.d(e,"h",(function(){return E})),n.d(e,"g",(function(){return O})),n.d(e,"d",(function(){return j})),n.d(e,"f",(function(){return I})),n.d(e,"e",(function(){return P}));n(49),n(23),n(60),n(35),n(68);var r=n(16),o=n(0),c=n(19),l=(n(81),n(140),n(67),n(2),n(32),n(37),n(58),n(112),n(39),n(14),n(223)),d=n(751),f=n(757),m=n.n(f),h=n(666),v=n.n(h),_=n(314),y=n(6),C=n(718);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var $=5,T=v.a,k=new m.a(new d.Manager.providers.HttpProvider(y.k)),S=18;function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=Math.max(S-e,0);return t=new l.a(10).pow(n).times(t).toFixed(0),T.fromWei(t,"ether")}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;t=new l.a(t).toFixed(Number(e)),t=T.toWei(t,"ether");var n=Math.max(S-e,0),r=new l.a(10).pow(n);return new l.a(t).div(r).toFixed(0)}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,n=!1,r=new _.TinyEmitter,o=d(t).then((function(e){return Promise.all([k.getTransactionReceipt(t),k.getBlock(e.blockNumber),m(e),Promise.resolve(e)])})).then((function(t){var n=Object(c.a)(t,4),o=n[0],l=n[1],d=n[2],m=x(x(x({},n[3]),o),{},{confirmations:d,timestamp:1e3*l.timestamp});if(r.emit("confirmation",m),!m.status)throw new Error("Transaction failed");return d>=e?m:f(m)})).then((function(t){return r.emit("confirmed",t),t}));return l(o,r),o.unsubscribe=function(){n=!0,r.off("tx"),r.off("confirmation"),r.off("confirmed")},o;function l(t,e){t.on=function(){return e.on.apply(e,arguments),t},t.once=function(){return e.once.apply(e,arguments),t}}function d(t){return k.getTransaction(t).then((function(e){if(n)throw new Error("unsubscribed");return e&&r.emit("tx",e),e&&e.blockHash?e:L(1e4).then((function(){return d(t)}))}))}function f(t){return L(1e4).then((function(){return m(t)})).then((function(o){if(n)throw new Error("unsubscribed");return t=x(x({},t),{},{confirmations:o}),r.emit("confirmation",t),o>=e?t:f(t)}))}function m(t){return j().then((function(e){return e-t.blockNumber+1}))}}function L(time){return new Promise((function(t){setTimeout(t,time)}))}var M={isLoading:!1,timestamp:0,promise:null};function j(){if(M.isLoading)return M.promise;if(Date.now()-M.timestamp<5e3)return M.promise;var t=k.getBlockNumber();return M.isLoading=!0,M.promise=t,t.then((function(){M.isLoading=!1,M.timestamp=Date.now()})).catch((function(t){throw M.isLoading=!1,t})),t}var F={};function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(F[t])return F[t];var n=e.find((function(e){return e.ethAddr===t}));if(n)return Promise.resolve(Number(n.ethDecimals));var r=new k.Contract(C.a,t),o=r.methods.decimals().call().then((function(t){return Number(t)})).catch((function(e){return console.log(e),delete F[t],S}));return F[t]=o,o}function P(t,e,n){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r){var input,o,c,l,d,f,m,h,_,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(input=e.input.slice(10),2!==(o=input.length/64)){t.next=22;break}if(f="0x"+input.slice(0,64),m=k.abi.decodeParameter("address",f),!(m.toLowerCase()===y.w.toLowerCase())){t.next=19;break}if(c=y.v.UNLOCK,l=e.to,!r){t.next=13;break}t.t0=0,t.next=16;break;case 13:return t.next=15,N(input.slice(64*(o-1)),l,n);case 15:t.t0=t.sent;case 16:d=t.t0,t.next=20;break;case 19:return t.abrupt("return",{type:y.v.OTHER});case 20:t.next=43;break;case 22:if(e.to.toLowerCase()!==y.w.toLowerCase()||3!==o){t.next=36;break}if(c=y.v.SEND,h="0x"+input.slice(0,64),l=k.abi.decodeParameter("address",h),!r){t.next=30;break}t.t1=0,t.next=33;break;case 30:return t.next=32,N(input.slice(64*(o-1)),l,n);case 32:t.t1=t.sent;case 33:d=t.t1,t.next=43;break;case 36:if(e.to.toLowerCase()!==y.I.toLowerCase()||0!==o){t.next=42;break}c=y.v.WRAP,l=e.to,d=v.a.fromWei(e.value),t.next=43;break;case 42:return t.abrupt("return",{type:y.v.OTHER});case 43:return _="",c===y.v.WRAP?_="ETH":(C=n.find((function(t){return t.ethAddr===l})))&&(_=C.denom.toUpperCase()),t.abrupt("return",{type:c,tokenContract:l,tokenName:_,amount:d});case 46:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e,n){return V.apply(this,arguments)}function V(){return(V=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r){var o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="0x"+e,t.next=3,I(n,r);case 3:return c=t.sent,l=A(k.abi.decodeParameter("uint256",o),c),t.abrupt("return",l);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},694:function(t,e){},696:function(t,e){},718:function(t,e,n){"use strict";e.a=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}]},774:function(t,e,n){"use strict";e.a=[{inputs:[{internalType:"bytes32",name:"_peggyId",type:"bytes32"},{internalType:"uint256",name:"_powerThreshold",type:"uint256"},{internalType:"address[]",name:"_validators",type:"address[]"},{internalType:"uint256[]",name:"_powers",type:"uint256[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToHubEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_tokenContract",type:"address"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"_destination",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"SendToMinterEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_batchNonce",type:"uint256"},{indexed:!0,internalType:"address",name:"_token",type:"address"},{indexed:!1,internalType:"uint256",name:"_eventNonce",type:"uint256"}],name:"TransactionBatchExecutedEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{indexed:!1,internalType:"address[]",name:"_validators",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"_powers",type:"uint256[]"}],name:"ValsetUpdatedEvent",type:"event"},{inputs:[{internalType:"address",name:"_erc20Address",type:"address"}],name:"lastBatchNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToHub",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_tokenContract",type:"address"},{internalType:"bytes32",name:"_destination",type:"bytes32"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendToMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"state_lastBatchNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastEventNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetCheckpoint",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_lastValsetNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_peggyId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"state_powerThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"},{internalType:"address[]",name:"_destinations",type:"address[]"},{internalType:"uint256[]",name:"_fees",type:"uint256[]"},{internalType:"uint256",name:"_batchNonce",type:"uint256"},{internalType:"address",name:"_tokenContract",type:"address"}],name:"submitBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_newValidators",type:"address[]"},{internalType:"uint256[]",name:"_newPowers",type:"uint256[]"},{internalType:"uint256",name:"_newValsetNonce",type:"uint256"},{internalType:"address[]",name:"_currentValidators",type:"address[]"},{internalType:"uint256[]",name:"_currentPowers",type:"uint256[]"},{internalType:"uint256",name:"_currentValsetNonce",type:"uint256"},{internalType:"uint8[]",name:"_v",type:"uint8[]"},{internalType:"bytes32[]",name:"_r",type:"bytes32[]"},{internalType:"bytes32[]",name:"_s",type:"bytes32[]"}],name:"updateValset",outputs:[],stateMutability:"nonpayable",type:"function"}]},775:function(t,e,n){"use strict";e.a=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"},{name:"wad",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"src",type:"address"},{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"wad",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"guy",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"dst",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"dst",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}]},779:function(t,e,n){"use strict";(function(t){var r,o=n(16),c=n(19),l=(n(81),n(112),n(2),n(11),n(67),n(52),n(58),n(32),n(37),n(36),n(9),n(24),n(39),n(14),n(626)),d=n(627),f=n.n(d),m=n(657),h=n.n(m),v=n(631),_=n.n(v),y=n(187),C=n.n(y),w=(n(664),n(637)),x=n(687),$=n(1106),T=n(223),k=n(102),S=n(718),A=n(774),E=n(775),O=n(6),L=n(306),M=n(625),j=n(628),F=n(1156),I=n(1153),P=n(655),R=n(645),N=n(634),V="finished",D="rejected",U="pending",W="wrap",B="approve",H="transfer";function X(t){return new x.b.Contract(S.a,t)}var G=O.w,Q=new x.b.Contract(A.a,G),K=new x.b.Contract(E.a,O.I).methods.deposit().encodeABI(),z=C()({type:"validAmount"},(function(t){return parseFloat(t)>=0}));e.a={TX_WRAP:W,TX_APPROVE:B,TX_TRANSFER:H,components:{Loader:j.a,TxListItem:F.a,Account:I.a,FieldUseMax:P.a,FieldQr:R.a,FieldCoin:N.a},directives:{autosize:w.a,checkEmpty:M.a},mixins:[l.validationMixin],props:{hubCoinList:{type:Array,required:!0},priceList:{type:Array,required:!0}},data:function(){return{ethAddress:"",balances:{},decimals:{},balanceRequest:null,allowanceList:{},allowanceRequest:null,form:{coin:"",amount:"",address:this.$store.getters.address,isInfiniteUnlock:!0},transactionList:[],isFormSending:!1,serverError:"",waitWrapConfirmation:!1,waitApproveConfirmation:!1,isConnectionStartedAndModalClosed:!1}},validations:function(){var t=this;return{form:{address:{required:f.a,validAddress:function(address){return/^Mx[0-9a-fA-F]{40}$/.test(address)}},coin:{required:f.a,minLength:_()(3),supported:function(){return!!t.coinContractAddress}},amount:{required:f.a,validAmount:z,maxValue:h()(this.maxAmount||0),minValue:function(t){return t>0}}}}},computed:{isConnected:function(){return!!this.ethAddress},hubFeeRate:function(){var t=this,e=this.hubCoinList.find((function(e){return e.symbol===t.form.coin}));return(null==e?void 0:e.customCommission)||.01},hubFee:function(){var t=new T.a(this.hubFeeRate).div(new T.a(1).minus(this.hubFeeRate));return new T.a(this.form.amount||0).times(t).toString()},amountToSpend:function(){return new T.a(this.hubFee).plus(this.form.amount||0).toString()},maxAmount:function(){var t=new T.a(this.selectedBalance).times(this.hubFeeRate),e=new T.a(this.selectedBalance).minus(t);return e.lt(0)?0:e.toString()},coinContractAddress:function(){var t=this,e=this.hubCoinList.find((function(e){return e.symbol===t.form.coin}));return e?e.ethAddr:void 0},isEthSelected:function(){return(this.coinContractAddress||"").toLowerCase()===O.I.toLowerCase()},isWrappingRequired:function(){return!!this.isEthSelected&&(0===Number(this.selectedWrapped)||this.amountToWrap>0)},isCoinApproved:function(){var t=new T.a(this.selectedUnlocked);return t.gt(0)&&t.gte(this.amountToSpend)},selectedBalance:function(){return this.isEthSelected?new T.a(this.balances[this.form.coin]||0).plus(this.balances[0]||0).toString():this.balances[this.form.coin]||0},selectedWrapped:function(){return this.isEthSelected&&this.balances[this.form.coin]||0},amountToWrap:function(){return new T.a(this.amountToSpend).minus(this.selectedWrapped).toString()},currentBalanceRequest:function(){var t;return(null===(t=this.balanceRequest)||void 0===t?void 0:t.coin)===this.form.coin?this.balanceRequest:null},currentAllowanceRequest:function(){var t;return(null===(t=this.allowanceRequest)||void 0===t?void 0:t.coin)===this.form.coin?this.allowanceRequest:null},selectedUnlocked:function(){var t=this.allowanceList[this.form.coin];return t?Object(x.c)(t,this.decimals[this.form.coin]):0},selectedUnlockedInfinity:function(){return this.selectedUnlocked>Math.pow(10,18)},amountToUnlock:function(){return this.amountToSpend},suggestionList:function(){return this.hubCoinList.map((function(t){return t.symbol.toUpperCase()}))},stage:function(){return this.isWrappingRequired?W:this.isCoinApproved?H:B}},watch:{ethAddress:{handler:function(t){var address,e,n=this;t?(this.updateBalance(),this.getAllowance(),(address=t,e=this.hubCoinList,Promise.all([Object($.a)(address,{page:1,offset:100}),Promise.resolve([])]).then((function(t){var n=Object(c.a)(t,2),r=n[0],o=n[1];r=r.filter((function(t){return!o.find((function(e){return e.hash.toLowerCase()===t.hash.toLowerCase()}))}));var l=o.concat(r).map((function(t){return Object(x.e)(t,e,!0).then((function(e){return{info:e,tx:t}}))}));return Promise.all(l)})).then((function(t){return(t=t.filter((function(t){return t.info.type!==O.v.OTHER}))).slice(0,5).map((function(t){return t.tx}))}))).then((function(t){n.transactionList=t}))):this.transactionList=[]}},coinContractAddress:{handler:function(){this.updateBalance(),this.getAllowance()}},isWrappingRequired:{handler:function(t){!t&&this.waitWrapConfirmation&&(this.waitWrapConfirmation=!1,this.isFormSending=!1)}},isCoinApproved:{handler:function(t){t&&this.waitApproveConfirmation&&(this.waitApproveConfirmation=!1,this.isFormSending=!1)}}},mounted:function(){var t=this;r=setInterval((function(){t.updateBalance(),t.getAllowance()}),5e3)},destroyed:function(){clearInterval(r)},methods:{pretty:k.r,prettyPrecise:k.u,prettyRound:k.w,updateBalance:function(){var t,e=this;if(this.isConnected&&this.coinContractAddress&&(null===(t=this.currentBalanceRequest)||void 0===t?void 0:t.promiseStatus)!==U)var n=this.form.coin,r=Promise.all([X(this.coinContractAddress).methods.balanceOf(this.ethAddress).call(),Object(x.f)(this.coinContractAddress,this.hubCoinList),this.isEthSelected?x.b.getBalance(this.ethAddress):Promise.resolve()]).then((function(t){var o=Object(c.a)(t,3),l=o[0],d=o[1],f=o[2];e.$set(e.balances,n,Object(x.c)(l,d)),e.$set(e.decimals,n,d),f&&e.$set(e.balances,0,x.i.fromWei(f)),e.form.coin===n&&(e.balanceRequest={coin:n,promiseStatus:V,promise:r})})).catch((function(t){console.log(t),e.form.coin===n&&(e.balanceRequest={coin:n,promiseStatus:D,promise:r},e.serverError="Can't get balance")}))},getAllowance:function(){var t,e=this,n=this.form.coin;if(this.isConnected&&this.coinContractAddress&&(null===(t=this.currentAllowanceRequest)||void 0===t?void 0:t.promiseStatus)!==U){var r=X(this.coinContractAddress).methods.allowance(this.ethAddress,G).call().then((function(t){e.$set(e.allowanceList,n,t),e.form.coin===n&&(e.allowanceRequest={coin:n,promiseStatus:V,promise:r})})).catch((function(t){console.log(t),e.$set(e.allowanceList,n,null),e.form.coin===n&&(e.allowanceRequest={coin:n,promiseStatus:D,promise:r},e.serverError="Can't get allowance")}));return this.allowanceRequest={coin:n,promiseStatus:U,promise:r},r}},ensureRequest:function(t,e){var n=this;return(null==t?void 0:t.promiseStatus)===V?Promise.resolve():(null==t?void 0:t.promiseStatus)===U?t.promise.then((function(){return new Promise((function(t){n.$nextTick(t)}))})):(null==t?void 0:t.promise)===D?Promise.reject(e):void 0},submit:function(){var t=this;if(!this.isFormSending){var e;if(!this.$v.$invalid)return this.isFormSending=!0,this.serverError="",Promise.all([this.ensureRequest(this.currentAllowanceRequest,"Can't get allowance"),this.ensureRequest(this.currentBalanceRequest,"Can't get balance")]).then((function(){return(e=t.stage)===W?t.wrapEther():e===B?t.sendApproveTx():e===H?t.sendCoinTx():void 0})).then((function(n){t.transactionList.unshift({hash:n,type:e,timestamp:(new Date).toISOString()})})).catch((function(e){t.serverError=Object(L.a)(e),console.error(e),t.isFormSending=!1}));this.$v.$touch()}},wrapEther:function(){var t=this;return this.sendEthTx({to:O.I,value:this.amountToWrap,data:K}).then((function(e){return t.waitWrapConfirmation=!0,e}))},sendApproveTx:function(){var t,e=this;t=this.form.isInfiniteUnlock?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":Object(x.h)(this.amountToUnlock,this.decimals[this.form.coin]);var data=X(this.coinContractAddress).methods.approve(G,t).encodeABI();return this.sendEthTx({to:this.coinContractAddress,data:data}).then((function(t){return e.waitApproveConfirmation=!0,t}))},sendCoinTx:function(){var address,e=this;address=t.concat([t.alloc(12),t.from(x.i.hexToBytes(this.form.address.replace("Mx","0x")))]);var data=Q.methods.sendToMinter(this.coinContractAddress,address,Object(x.h)(this.amountToSpend,this.decimals[this.form.coin])).encodeABI();return this.sendEthTx({to:G,data:data}).then((function(t){return e.$v.$reset(),e.form.address=e.$store.getters.address,e.form.amount="",e.form.coin="",e.isFormSending=!1,t}))},sendEthTx:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,data,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.to,o=t.value,data=t.data,n.t0=e.ethAddress,n.t1=r,n.t2=data,n.t3=o?Object(x.h)(o):"0x00",n.next=7,x.b.getTransactionCount(e.ethAddress,"pending");case 7:return n.t4=n.sent,c={from:n.t0,to:n.t1,data:n.t2,value:n.t3,nonce:n.t4},n.abrupt("return",e.$refs.ethAccount.sendTransaction(c));case 10:case"end":return n.stop()}}),n)})))()}}}}).call(this,n(18).Buffer)},809:function(t,e){},810:function(t,e){},834:function(t,e){},836:function(t,e){}}]);