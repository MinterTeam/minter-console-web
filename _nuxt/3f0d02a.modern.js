(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1139:function(e,t,r){"use strict";r.r(t);r(21);var n=r(626),o=(r(8),r(650)),c=r(611),d=r(601),l=r(276),h=r(61),v=r(603),m={components:{QrcodeVue:o.a,Loader:v.a},directives:{checkEmpty:d.a},filters:{pretty:h.s,uppercase:e=>e?e.toUpperCase():e},data:()=>({isFormSending:!1,serverError:"",serverSuccess:""}),computed:{},methods:{submit(){this.isFormSending||(this.isFormSending=!0,this.serverError="",this.serverSuccess="",Object(c.f)(this.$store.getters.address).then((e=>{this.isFormSending=!1,this.serverSuccess=e.toString()})).catch((e=>{console.log(e),this.isFormSending=!1,this.serverError=Object(l.a)(e)})))},getExplorerTxUrl:h.l}},_=r(40),component=Object(_.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"panel__section",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[r("div",{staticClass:"u-cell"},[r("button",{staticClass:"button button--main button--full",class:{"is-loading":e.isFormSending}},[r("span",{staticClass:"button__content"},[e._v(e._s(e.$td("Get nonce","form.broadcast-nonce-button")))]),e._v(" "),r("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1),e._v(" "),e.serverError?r("div",{staticClass:"form-field__error"},[e._v(e._s(e.serverError))]):e._e()]),e._v(" "),e.serverSuccess?r("div",{staticClass:"u-cell"},[r("p",[r("strong",[e._v(e._s(e.$td("Nonce for a new transaction:","form.broadcast-nonce-got")))]),e._v(" "+e._s(e.serverSuccess)+"\n            ")]),e._v(" "),r("p",[r("qrcode-vue",{attrs:{value:e.serverSuccess,size:100,level:"L"}})],1)]):e._e()])])}),[],!1,null,null,null),f=component.exports,$=r(606),E=r(605),C={components:{FieldQr:r(625).a,Loader:v.a},directives:{checkEmpty:d.a},filters:{pretty:h.s,uppercase:e=>e?e.toUpperCase():e},mixins:[$.a],data:()=>({isFormSending:!1,serverError:"",serverSuccess:"",form:{signedTx:""}}),validations:()=>({form:{signedTx:{required:E.a}}}),computed:{},methods:{submit(){this.isFormSending||(this.$v.$invalid?this.$v.$touch():(this.isFormSending=!0,this.serverError="",this.serverSuccess="",Object(c.g)(this.form.signedTx).then((e=>{this.isFormSending=!1,this.serverSuccess=e.hash,this.clearForm()})).catch((e=>{console.log(e),this.isFormSending=!1,this.serverError=Object(l.a)(e)}))))},clearForm(){this.form.signedTx="",this.$v.$reset()},getExplorerTxUrl:h.l}},y=Object(_.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"panel__section",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("div",{staticClass:"u-grid u-grid--small u-grid--vertical-margin--small"},[r("div",{staticClass:"u-cell"},[r("FieldQr",{attrs:{$value:e.$v.form.signedTx,label:e.$td("Signed tx","form.broadcast-tx")},model:{value:e.form.signedTx,callback:function(t){e.$set(e.form,"signedTx","string"==typeof t?t.trim():t)},expression:"form.signedTx"}}),e._v(" "),e.$v.form.signedTx.$dirty&&!e.$v.form.signedTx.required?r("span",{staticClass:"form-field__error"},[e._v(e._s(e.$td("Enter signed tx","form.broadcast-tx-error-required")))]):e._e()],1),e._v(" "),r("div",{staticClass:"u-cell"},[r("button",{staticClass:"button button--main button--full",class:{"is-loading":e.isFormSending,"is-disabled":e.$v.$invalid}},[r("span",{staticClass:"button__content"},[e._v(e._s(e.$td("Send","form.broadcast-tx-button")))]),e._v(" "),r("Loader",{staticClass:"button__loader",attrs:{isLoading:!0}})],1),e._v(" "),e.serverError?r("div",{staticClass:"form-field__error"},[e._v(e._s(e.serverError))]):e._e()]),e._v(" "),e.serverSuccess?r("div",{staticClass:"u-cell"},[r("strong",[e._v(e._s(e.$td("Tx sent:","form.tx-sent")))]),e._v(" "),r("a",{staticClass:"link--default u-text-break",attrs:{href:e.getExplorerTxUrl(e.serverSuccess),target:"_blank"}},[e._v(e._s(e.serverSuccess))])]):e._e()])])}),[],!1,null,null,null),S={components:{BroadcastNonceForm:f,BroadcastSendForm:y.exports},fetch(e){var{app:t,store:r}=e;return r.commit("SET_SECTION_NAME",t.$td("Broadcast","common.page-broadcast")),Promise.resolve()},head(){var title=Object(n.a)(this.$store.state.sectionName,this.$i18n.locale),e=this.$td("Send tx signed on the offline device","broadcast.seo-description"),t="en"===this.$i18n.locale?"":"-"+this.$i18n.locale;return{title:title,meta:[{hid:"og-title",name:"og:title",content:title},{hid:"description",name:"description",content:e},{hid:"og-description",name:"og:description",content:e},{hid:"og-image",name:"og:image",content:"".concat(this.BASE_URL_PREFIX,"/img/social-share-broadcast").concat(t,".png")}]}}},w=Object(_.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"u-section u-container"},[r("div",{staticClass:"panel"},[r("div",{staticClass:"panel__header"},[r("h1",{staticClass:"panel__header-title"},[e._v("\n                "+e._s(e.$td("Get nonce","broadcast.nonce-title"))+"\n            ")]),e._v(" "),r("p",{staticClass:"panel__header-description"},[e._v("\n                "+e._s(e.$td("Get nonce needed to generate a new tx on an offline device.","broadcast.nonce-description"))+"\n            ")])]),e._v(" "),r("BroadcastNonceForm")],1),e._v(" "),r("div",{staticClass:"panel"},[r("div",{staticClass:"panel__header"},[r("h1",{staticClass:"panel__header-title"},[e._v("\n                "+e._s(e.$td("Send signed tx","broadcast.tx-title"))+"\n            ")]),e._v(" "),r("p",{staticClass:"panel__header-description"},[e._v("\n                "+e._s(e.$td("Send a tx generated on an offline device.","broadcast.tx-description"))+"\n            ")])]),e._v(" "),r("BroadcastSendForm")],1)])}),[],!1,null,null,null);t.default=w.exports},647:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(21),r(684),r(4),r(6),r(11),r(690),r(410);class n{static hasCamera(){return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((e=>e.some((e=>"videoinput"===e.kind)))).catch((()=>!1)):Promise.reject(!1)}constructor(video,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.DEFAULT_CANVAS_SIZE;this.$video=video,this.$canvas=document.createElement("canvas"),this._onDecode=e,this._active=!1,this._paused=!1,this.$canvas.width=t,this.$canvas.height=t,this._sourceRect={x:0,y:0,width:t,height:t},this._onCanPlay=this._onCanPlay.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.addEventListener("canplay",this._onCanPlay),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrWorker=new Worker(n.WORKER_PATH)}destroy(){this.$video.removeEventListener("canplay",this._onCanPlay),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),this._qrWorker.postMessage({type:"close"})}start(){if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();var e="environment";return this._getCameraStream("environment",!0).catch((()=>(e="user",this._getCameraStream()))).then((t=>{this._isUserFacing(t)&&(e="user"),this.$video.srcObject=t,this._setVideoMirror(e)})).catch((e=>{throw this._active=!1,e}))}stop(){this.pause(),this._active=!1}pause(){this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout((()=>{var track=this.$video.srcObject&&this.$video.srcObject.getTracks()[0];track&&(track.stop(),this.$video.srcObject=null,this._offTimeout=null)}),300)))}static scanImage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,canvas=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=!1,l=new Promise(((c,l)=>{var h,v,m;r||(r=new Worker(n.WORKER_PATH),d=!0,r.postMessage({type:"inversionMode",data:"both"})),v=e=>{"qrResult"===e.data.type&&(r.removeEventListener("message",v),r.removeEventListener("error",m),clearTimeout(h),null!==e.data.data?c(e.data.data):l("QR code not found."))},m=e=>{r.removeEventListener("message",v),r.removeEventListener("error",m),clearTimeout(h);var t=e?e.message||e:"Unknown Error";l("Scanner error: "+t)},r.addEventListener("message",v),r.addEventListener("error",m),h=setTimeout((()=>m("timeout")),3e3),n._loadImage(e).then((image=>{var e=n._getImageData(image,t,canvas,o);r.postMessage({type:"decode",data:e},[e.data.buffer])})).catch(m)}));return t&&c&&(l=l.catch((()=>n.scanImage(e,null,r,canvas,o)))),l=l.finally((()=>{d&&r.postMessage({type:"close"})}))}setGrayscaleWeights(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._qrWorker.postMessage({type:"grayscaleWeights",data:{red:e,green:t,blue:r,useIntegerApproximation:n}})}setInversionMode(e){this._qrWorker.postMessage({type:"inversionMode",data:e})}_onCanPlay(){this._updateSourceRect(),this.$video.play()}_onPlay(){this._updateSourceRect(),this._scanFrame()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_updateSourceRect(){var e=Math.min(this.$video.videoWidth,this.$video.videoHeight),t=Math.round(2/3*e);this._sourceRect.width=this._sourceRect.height=t,this._sourceRect.x=(this.$video.videoWidth-t)/2,this._sourceRect.y=(this.$video.videoHeight-t)/2}_scanFrame(){if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame((()=>{this.$video.readyState<=1?this._scanFrame():n.scanImage(this.$video,this._sourceRect,this._qrWorker,this.$canvas,!0).then(this._onDecode,(e=>{this._active&&"QR code not found."!==e&&console.error(e)})).then((()=>this._scanFrame()))}))}_getCameraStream(e){var t=[{width:{min:1024}},{width:{min:768}},{}];return e&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e={exact:e}),t.forEach((t=>t.facingMode=e))),this._getMatchingCameraStream(t)}_getMatchingCameraStream(e){return 0===e.length?Promise.reject("Camera not found."):navigator.mediaDevices.getUserMedia({video:e.shift()}).catch((()=>this._getMatchingCameraStream(e)))}_setVideoMirror(e){var t="user"===e?-1:1;this.$video.style.transform="scaleX("+t+")"}_isUserFacing(e){return/front|user|face/i.test(e.getVideoTracks()[0].label)}static _getImageData(image){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,canvas=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];canvas=canvas||document.createElement("canvas");var r=e&&e.x?e.x:0,n=e&&e.y?e.y:0,o=e&&e.width?e.width:image.width||image.videoWidth,c=e&&e.height?e.height:image.height||image.videoHeight;t||canvas.width===o&&canvas.height===c||(canvas.width=o,canvas.height=c);var d=canvas.getContext("2d",{alpha:!1});return d.imageSmoothingEnabled=!1,d.drawImage(image,r,n,o,c,0,0,canvas.width,canvas.height),d.getImageData(0,0,canvas.width,canvas.height)}static _loadImage(e){if(e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||window.ImageBitmap&&e instanceof window.ImageBitmap||window.OffscreenCanvas&&e instanceof window.OffscreenCanvas)return Promise.resolve(e);if(e instanceof Image)return n._awaitImageLoad(e).then((()=>e));if(e instanceof File||e instanceof URL||"string"==typeof e){var image=new Image;return e instanceof File?image.src=URL.createObjectURL(e):image.src=e,n._awaitImageLoad(image).then((()=>(e instanceof File&&URL.revokeObjectURL(image.src),image)))}return Promise.reject("Unsupported image type.")}static _awaitImageLoad(image){return new Promise(((e,t)=>{var r,n;image.complete&&0!==image.naturalWidth?e():(r=()=>{image.removeEventListener("load",r),image.removeEventListener("error",n),e()},n=()=>{image.removeEventListener("load",r),image.removeEventListener("error",n),t("Image load error")},image.addEventListener("load",r),image.addEventListener("error",n))}))}}n.DEFAULT_CANVAS_SIZE=400,n.WORKER_PATH="qr-scanner-worker.min.js"},648:function(e,t,r){"use strict";t.a=r.p+"6b7d1afd4fb85864e691672bb54a14d3.js"}}]);